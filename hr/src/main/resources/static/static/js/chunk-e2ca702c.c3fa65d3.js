/*!
 *  build: admin-pro 
 *  copyright: sxdl 
 *  time: 2022-8-19 15:07:19
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e2ca702c"],{"10a3":function(e,t,r){},5289:function(e,t,r){"use strict";r.r(t),r.d(t,"getUser",(function(){return a})),r.d(t,"getInfos",(function(){return u})),r.d(t,"findProduct",(function(){return c})),r.d(t,"findBySysUserId",(function(){return d})),r.d(t,"findByStaffId",(function(){return l})),r.d(t,"findAllRoles",(function(){return f})),r.d(t,"findByKsId",(function(){return p})),r.d(t,"insertUserList",(function(){return m})),r.d(t,"updatePwd",(function(){return g})),r.d(t,"updatePwdByAdmin",(function(){return h})),r.d(t,"deleteUser",(function(){return y})),r.d(t,"deleteRole",(function(){return v})),r.d(t,"deleteKs",(function(){return b})),r.d(t,"saveUser",(function(){return w})),r.d(t,"updateFmuser",(function(){return x})),r.d(t,"saveRole",(function(){return k})),r.d(t,"saveKs",(function(){return O})),r.d(t,"isVerify",(function(){return j}));var n,s=r("b775"),i=r("4360"),o=null===(n=i["default"].getters["user/ip"])||void 0===n?void 0:n.dc,a=function(e){return Object(s["default"])({url:"/sysUser/findAll",method:"get",params:e})},u=function(e){return Object(s["default"])({url:"/fmuser/getInfos",method:"get",params:e})},c=function(e){return Object(s["default"])({url:"/sysUser/findProduct",method:"get",params:e})},d=function(e){return Object(s["default"])({url:"/sysUser/findBySysUserId",method:"get",params:e})},l=function(e){return Object(s["default"])({url:"/sysStaff/findByStaffId",method:"get",params:e})},f=function(e){return Object(s["default"])({url:"/sysRole/findAllRoles",method:"get",params:e})},p=function(e){return Object(s["default"])({url:o+"/sysKs/findByKsId",method:"get",params:e})},m=function(e){return Object(s["default"])({url:"/sysUser/insertUserList",method:"get",params:e})},g=function(e){return Object(s["default"])({url:"/sysUser/updatePwd",method:"get",params:e})},h=function(e){return Object(s["default"])({url:"/sysUser/updatePwdByAdmin",method:"put",data:e})},y=function(e){return Object(s["default"])({url:"/sysUser/delete",method:"delete",data:e})},v=function(e){return Object(s["default"])({url:"/sysUserVsRole/delete",method:"delete",data:e})},b=function(e){return Object(s["default"])({url:"/sysUserVsKs/delete",method:"delete",data:e})},w=function(e){return Object(s["default"])({url:"/sysUser/saveBa",method:"post",data:e})},x=function(e){return Object(s["default"])({url:"/fmuser/updateFmuser",method:"get",params:e})},k=function(e){return Object(s["default"])({url:"/sysUserVsRole/save",method:"post",data:e})},O=function(e){return Object(s["default"])({url:"/sysUserVsKs/save",method:"post",data:e})},j=function(e){return Object(s["default"])({url:"/verify/isVerify",method:"get",params:e})}},"81a5":function(e,t,r){e.exports=r.p+"static/img/logo.7885f0fa.png"},"83ca":function(e,t,r){e.exports=r.p+"static/img/ewm.561e35b3.png"},"9ed6":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login-container"},[n("div",{staticClass:"main"},[n("div",{staticClass:"title-tips"},[e._v(e._s(e.title))]),n("div",{staticClass:"tel"},[n("div",{staticStyle:{height:"40px"}},[n("img",{staticStyle:{float:"left",width:"40px",height:"40px"},attrs:{src:r("81a5")}}),n("span",{staticStyle:{float:"left","font-size":"24px","line-height":"40px"}},[e._v(" 雕龙科技 ")])]),n("div",[e._v("TEL： 0351 - 2526449")]),n("div",[e._v("推荐IE10以上或者谷歌浏览器")])]),n("img",{staticClass:"ewm",attrs:{alt:"",src:r("83ca")}}),n("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{"auto-complete":"off","label-position":"left",model:e.loginForm,rules:e.loginRules}},[n("div",{staticClass:"title"},[e._v("登录")]),n("el-form-item",{staticStyle:{"margin-top":"40px"},attrs:{prop:"userName"}},[n("span",{staticClass:"svg-container"},[n("vab-icon",{attrs:{icon:"user-line"}})],1),n("el-input",{directives:[{name:"focus",rawName:"v-focus"}],attrs:{"auto-complete":"off",placeholder:"请输入用户名",tabindex:"1",type:"text"},on:{change:e.nameChange},model:{value:e.loginForm.name,callback:function(t){e.$set(e.loginForm,"name","string"===typeof t?t.trim():t)},expression:"loginForm.name"}})],1),n("el-form-item",{attrs:{prop:"password"}},[n("span",{staticClass:"svg-container svg-container-pass"},[n("vab-icon",{attrs:{icon:"lock-line"}})],1),n("el-input",{key:e.passwordType,ref:"password",attrs:{"auto-complete":"off",placeholder:"请输入密码",tabindex:"2",type:e.passwordType},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin.apply(null,arguments)}},scopedSlots:e._u(["password"===e.passwordType?{key:"suffix",fn:function(){return[n("vab-icon",{staticClass:"show-pwd",attrs:{icon:"eye-off-line"},on:{click:e.showPwd}})]},proxy:!0}:{key:"suffix",fn:function(){return[n("vab-icon",{staticClass:"show-pwd",attrs:{icon:"eye-line"},on:{click:e.showPwd}})]},proxy:!0}],null,!0),model:{value:e.loginForm.pwd,callback:function(t){e.$set(e.loginForm,"pwd","string"===typeof t?t.trim():t)},expression:"loginForm.pwd"}})],1),n("el-form-item",[n("el-checkbox",{model:{value:e.rememberMe,callback:function(t){e.rememberMe=t},expression:"rememberMe"}},[e._v("记住用户名")])],1),n("el-form-item",[n("el-button",{staticClass:"login-btn",attrs:{type:"primary"},on:{click:e.handleLogin}},[e._v(" 登 录 ")]),n("p",{staticStyle:{"padding-top":"10px","font-size":"16px","text-align":"center"}},[n("span",{staticStyle:{color:"#ff0000"}},[e._v(" 当前为:["+e._s(1==e.verify.scopeType?"天数限制版":"永久版")+"] "),1==e.verify.scopeType?n("span",[e._v("还有"+e._s(e.day)+"天过期!")]):e._e()]),n("el-button",{staticStyle:{"font-size":"16px"},attrs:{type:"text"}},[n("router-link",{staticStyle:{display:"inline-block"},attrs:{to:"/register"}},[n("div",[e._v("[点击注册]")])])],1)],1)],1)],1)],1)])},s=[],i=r("febe"),o=(r("e186"),r("8fec"),r("10dd"),r("61f7")),a=r("5289"),u=r("f121"),c={name:"Login",directives:{focus:{inserted:function(e){e.querySelector("input").focus()}}},data:function(){var e=function(e,t,r){""==t?r(new Error("用户名不能为空")):r()},t=function(e,t,r){Object(o["isPassword"])(t)?r():r(new Error("密码不能少于6位"))};return{rememberMe:!1,nodeEnv:"production",title:u["title"],loginForm:{name:"",pwd:""},loginRules:{name:[{required:!0,trigger:"blur",validator:e}],pwd:[{required:!0,trigger:"blur",validator:t}]},loading:!1,passwordType:"password",redirect:void 0,verify:{},day:0}},watch:{$route:{handler:function(e){this.redirect=e.query&&e.query.redirect||"/"},immediate:!0}},mounted:function(){var e=sessionStorage.getItem("userName")&&sessionStorage.getItem("userName").length>0;e&&(this.loginForm.name=sessionStorage.getItem("userName"),this.rememberMe=!0)},created:function(){this.isRegister(),this.$route.query&&this.$route.query.username&&this.$route.query.pwd&&this.handleLogin2({name:this.$route.query.username,pwd:this.$route.query.pwd}),console.log(this.$route.query)},methods:{handleLogin2:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.loading=!0,r.next=3,t.$store.dispatch("user/login",e);case 3:return n="/404"===t.redirect||"/401"===t.redirect?"/":t.redirect,r.next=6,t.$router.push(n).catch((function(){}));case 6:t.loading=!1;case 7:case"end":return r.stop()}}),r)})))()},isRegister:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(a["isVerify"])();case 2:r=t.sent,n=r.t,s=r.state,"success"==s?(e.verify=n,e.day=n.scope):e.$router.push("/register");case 6:case"end":return t.stop()}}),t)})))()},toRegister:function(){this.$router.push("/register")},nameChange:function(){this.loading&&(this.loading=!this.loading)},showPwd:function(){var e=this;"password"===this.passwordType?this.passwordType="":this.passwordType="password",this.$nextTick((function(){e.$refs.password.focus()}))},handleLogin:function(){var e=this;this.$refs.loginForm.validate(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(r){var n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=11;break}return e.loading=!0,t.next=4,e.$store.dispatch("user/login",e.loginForm);case 4:return n="/404"===e.redirect||"/401"===e.redirect?"/":e.redirect,t.next=7,e.$router.push(n).catch((function(){}));case 7:e.loading=!1,e.rememberMe?sessionStorage.setItem("userName",e.loginForm.name):(s=sessionStorage.getItem("userName")&&sessionStorage.getItem("userName").length>0,s&&sessionStorage.removeItem("userName")),t.next=12;break;case 11:return t.abrupt("return",!1);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}},d=c,l=(r("ab2b"),r("cba8")),f=Object(l["a"])(d,n,s,!1,null,"17e87906",null);t["default"]=f.exports},ab2b:function(e,t,r){"use strict";r("10a3")}}]);