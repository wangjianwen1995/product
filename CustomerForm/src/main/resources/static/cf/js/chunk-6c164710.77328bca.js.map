{"version":3,"sources":["webpack:///./src/components/business/DataList/index.vue?0c9d","webpack:///./src/views/business/data-list-view.vue?fd13","webpack:///./src/views/business/data-list-view.vue?bd3d","webpack:///./src/components/business/DataList/index.vue?c8ad","webpack:///src/components/business/DataList/index.vue","webpack:///./src/components/business/DataList/index.vue?1b14","webpack:///./src/components/business/DataList/index.vue","webpack:///src/views/business/data-list-view.vue","webpack:///./src/views/business/data-list-view.vue?41b0","webpack:///./src/views/business/data-list-view.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","entity","staticRenderFns","staticClass","staticStyle","on","goBack","queryForm","_l","item","index","key","label","type","model","value","prop","callback","$$v","$set","expression","_e","$event","$forceUpdate","optionitem","optionindex","val","name","loadTableData","_v","addNewRecord","handleDownload","ref","columns","tableData","page","tableHeight","handleSizeChange","handleCurrentChange","formTitle","showFormDialogFlag","layout","formModel","fieldPropsMap","labelsModel","formState","setValue","slot","components","props","Object","default","customAddAction","Boolean","customEditAction","customDeleteAction","customDataLoad","pageNo","limit","sizes","total","crudMethods","initDataList","createRecord","updateRecord","saveRecord","deleteRecord","data","dialogVisible","entityLabel","idFieldName","nameFieldName","curRecordId","keyword","searchFilter","formModelCopy","queryList","flowData","flowFlag","computed","$baseTableHeight","mounted","$nextTick","window","onresize","initTable","methods","$router","back","resizeTableHeight","console","log","setTableData","columnList","forEach","recordList","$refs","SimpleTable","tabeldata","_","isArray","length","$emit","searchData","$message","error","clearSearch","refreshTableData","buildLayoutObj","handleDeletedFields","deletedFields","Array","layoutFieldWrappers","deletedFlag","fw","deleted","editTableData","row","hadelSave","deleteTableData","$confirm","handleClose","component"],"mappings":"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","file":"js/chunk-6c164710.77328bca.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../../node_modules/_sass-loader@8.0.2@sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=e0ed7436&lang=scss&scoped=true&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/_sass-loader@8.0.2@sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./data-list-view.vue?vue&type=style&index=0&id=630d4e5c&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-container',{attrs:{\"direction\":\"horizontal\"}},[_c('data-list',{attrs:{\"entity\":_vm.entity}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"dataList-container\",staticStyle:{\"width\":\"100%\"}},[_c('el-page-header',{attrs:{\"content\":\"列表展示\"},on:{\"back\":_vm.goBack}}),_c('div',{staticClass:\"list-search-panel\"},[_c('div',{staticClass:\"search-panel-right\"},[_c('el-form',{attrs:{\"model\":_vm.queryForm,\"inline\":\"\",\"size\":\"small\"}},[_vm._l((_vm.queryList),function(item,index){return _c('el-form-item',{key:index,attrs:{\"label\":item.label}},[(item.type == 'text')?[_c('el-input',{model:{value:(_vm.queryForm[item.prop]),callback:function ($$v) {_vm.$set(_vm.queryForm, item.prop, $$v)},expression:\"queryForm[item.prop]\"}})]:_vm._e(),(item.type == 'option' || item.type == 'options')?[_c('el-select',{attrs:{\"filterable\":\"\",\"clearable\":\"\",\"multiple\":item.type == 'options' ? true : false},on:{\"change\":function($event){return _vm.$forceUpdate()}},model:{value:(_vm.queryForm[item.prop]),callback:function ($$v) {_vm.$set(_vm.queryForm, item.prop, $$v)},expression:\"queryForm[item.prop]\"}},_vm._l((item.optionList),function(optionitem,optionindex){return _c('el-option',{key:optionindex,attrs:{\"value\":optionitem.val,\"label\":optionitem.name}})}),1)]:_vm._e()],2)}),(_vm.flowFlag)?_c('el-form-item',{attrs:{\"label\":\"流程状态\"}},[_c('el-select',{staticStyle:{\"width\":\"100px\"},attrs:{\"filterable\":\"\",\"clearable\":\"\"},model:{value:(_vm.queryForm['toexamine_result']),callback:function ($$v) {_vm.$set(_vm.queryForm, 'toexamine_result', $$v)},expression:\"queryForm['toexamine_result']\"}},[_c('el-option',{attrs:{\"value\":9,\"label\":\"完成\"}}),_c('el-option',{attrs:{\"value\":0,\"label\":\"未开始\"}}),_c('el-option',{attrs:{\"value\":1,\"label\":\"进行中\"}}),_c('el-option',{attrs:{\"value\":-1,\"label\":\"驳回\"}})],1)],1):_vm._e(),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.loadTableData}},[_vm._v(\"查询\")])],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\",\"icon\":\"el-icon-plus\"},on:{\"click\":_vm.addNewRecord}},[_vm._v(\" 新建 \")])],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\",\"icon\":\"el-icon-download\"},on:{\"click\":_vm.handleDownload}},[_vm._v(\"导出\")])],1)],2)],1)]),_c('div',{ref:\"tableContainer\"},[_c('div',{staticStyle:{\"height\":\"100%\"}},[_c('SimpleTable',{ref:\"SimpleTable\",attrs:{\"columns\":_vm.columns,\"data\":_vm.tableData,\"pagination\":_vm.page,\"show-check-box\":true,\"height\":_vm.tableHeight + 'px',\"table-size\":\"small\",\"table-width\":\"100% !important\"},on:{\"handleSizeChange\":_vm.handleSizeChange,\"handleCurrentChange\":_vm.handleCurrentChange}})],1),(_vm.showFormDialogFlag)?_c('el-dialog',{attrs:{\"title\":_vm.formTitle,\"visible\":_vm.showFormDialogFlag,\"destroy-on-close\":true,\"close-on-click-modal\":false,\"show-close\":true,\"close-on-press-escape\":false},on:{\"update:visible\":function($event){_vm.showFormDialogFlag=$event}}},[_c('FormWidget',{ref:\"formWidget\",attrs:{\"entity\":_vm.entity,\"layout\":_vm.layout,\"form-model\":_vm.formModel,\"field-props-map\":_vm.fieldPropsMap,\"labels-model\":_vm.labelsModel,\"form-state\":_vm.formState},on:{\"setFormModel\":_vm.setValue}}),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":function($event){_vm.showFormDialogFlag = false}}},[_vm._v(\" 取 消 \")])],1)],1):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"dataList-container\" style=\"width: 100%\">\n    <el-page-header content=\"列表展示\" @back=\"goBack\"></el-page-header>\n    <div class=\"list-search-panel\">\n      <div class=\"search-panel-right\">\n        <el-form :model=\"queryForm\" inline size=\"small\">\n          <el-form-item\n            v-for=\"(item, index) in queryList\"\n            :key=\"index\"\n            :label=\"item.label\"\n          >\n            <template v-if=\"item.type == 'text'\">\n              <el-input v-model=\"queryForm[item.prop]\"></el-input>\n            </template>\n            <template v-if=\"item.type == 'option' || item.type == 'options'\">\n              <el-select\n                v-model=\"queryForm[item.prop]\"\n                filterable\n                clearable\n                :multiple=\"item.type == 'options' ? true : false\"\n                @change=\"$forceUpdate()\"\n              >\n                <el-option\n                  v-for=\"(optionitem, optionindex) in item.optionList\"\n                  :key=\"optionindex\"\n                  :value=\"optionitem.val\"\n                  :label=\"optionitem.name\"\n                ></el-option>\n              </el-select>\n            </template>\n          </el-form-item>\n          <el-form-item v-if=\"flowFlag\" label=\"流程状态\">\n            <el-select\n              v-model=\"queryForm['toexamine_result']\"\n              filterable\n              clearable\n              style=\"width: 100px\"\n            >\n              <el-option :value=\"9\" label=\"完成\"></el-option>\n              <el-option :value=\"0\" label=\"未开始\"></el-option>\n              <el-option :value=\"1\" label=\"进行中\"></el-option>\n              <el-option :value=\"-1\" label=\"驳回\"></el-option>\n            </el-select>\n          </el-form-item>\n          <el-form-item>\n            <el-button type=\"primary\" @click=\"loadTableData\">查询</el-button>\n          </el-form-item>\n          <el-form-item>\n            <el-button\n              type=\"primary\"\n              size=\"small\"\n              icon=\"el-icon-plus\"\n              @click=\"addNewRecord\"\n            >\n              新建\n            </el-button>\n          </el-form-item>\n          <el-form-item>\n            <el-button\n              type=\"primary\"\n              size=\"small\"\n              icon=\"el-icon-download\"\n              @click=\"handleDownload\"\n              >导出</el-button\n            >\n          </el-form-item>\n        </el-form>\n      </div>\n    </div>\n\n    <div ref=\"tableContainer\">\n      <div style=\"height: 100%\">\n        <SimpleTable\n          ref=\"SimpleTable\"\n          :columns=\"columns\"\n          :data=\"tableData\"\n          :pagination=\"page\"\n          :show-check-box=\"true\"\n          :height=\"tableHeight + 'px'\"\n          table-size=\"small\"\n          table-width=\"100% !important\"\n          @handleSizeChange=\"handleSizeChange\"\n          @handleCurrentChange=\"handleCurrentChange\"\n        >\n        </SimpleTable>\n      </div>\n\n      <!-- 注意：必须同时设置v-if和close-on-press-escape属性，保证FormWidget在每一次对话框显示时都重新初始化！！ -->\n      <el-dialog\n        v-if=\"showFormDialogFlag\"\n        :title=\"formTitle\"\n        :visible.sync=\"showFormDialogFlag\"\n        :destroy-on-close=\"true\"\n        :close-on-click-modal=\"false\"\n        :show-close=\"true\"\n        :close-on-press-escape=\"false\"\n      >\n        <FormWidget\n          ref=\"formWidget\"\n          :entity=\"entity\"\n          :layout=\"layout\"\n          :form-model=\"formModel\"\n          :field-props-map=\"fieldPropsMap\"\n          :labels-model=\"labelsModel\"\n          :form-state=\"formState\"\n          @setFormModel=\"setValue\"\n        ></FormWidget>\n        <div slot=\"footer\" class=\"dialog-footer\">\n          <!--          <el-button-->\n          <!--            type=\"primary\"-->\n          <!--            size=\"small\"-->\n          <!--            style=\"width: 90px\"-->\n          <!--            @click=\"saveFormData\"-->\n          <!--          >-->\n          <!--            保 存-->\n          <!--          </el-button>-->\n          <el-button size=\"small\" @click=\"showFormDialogFlag = false\">\n            取 消\n          </el-button>\n        </div>\n      </el-dialog>\n    </div>\n  </div>\n</template>\n\n<script>\nimport FormWidget from \"@/views/system/field-widget/form-widget\";\nimport FormState from \"@/views/system/form-state-variables\";\nimport {\n  initDataList,\n  createRecord,\n  updateRecord,\n  saveRecord,\n  deleteRecord,\n  getDataList,\n  getColumnShowNoPage,\n} from \"@/api\";\nimport { arrayContain, isEmptyStr, setColumnFormatter } from \"@/utils/util\";\nimport Vue from \"vue\";\nimport { createLayoutObj } from \"@/views/system/layout/form-layout-object\";\nexport default {\n  name: \"DataList\",\n  components: { FormWidget },\n  props: {\n    entity: {\n      type: Object,\n      default: () => {},\n    },\n    customAddAction: {\n      type: Boolean,\n      default: false,\n    },\n    customEditAction: {\n      type: Boolean,\n      default: false,\n    },\n    customDeleteAction: {\n      type: Boolean,\n      default: false,\n    },\n    customDataLoad: {\n      type: Boolean,\n      default: false,\n    },\n    page: {\n      type: Object,\n      default: () => {\n        return {\n          pageNo: 1,\n          limit: 20,\n          sizes: [10, 20, 30, 50, 100],\n          total: 0,\n        };\n      },\n    },\n\n    crudMethods: {\n      type: Object,\n      default: () => {\n        return {\n          initDataList: initDataList,\n          createRecord: createRecord,\n          updateRecord: updateRecord,\n          saveRecord: saveRecord,\n          deleteRecord: deleteRecord,\n        };\n      },\n    },\n  },\n  data() {\n    return {\n      dialogVisible: false,\n      entityLabel: \"\",\n      idFieldName: null,\n      nameFieldName: null,\n      curRecordId: null,\n\n      keyword: \"\",\n      searchFilter: \"\",\n\n      columns: [],\n      tableData: [],\n\n      showFormDialogFlag: false,\n      layout: {},\n      formState: 1,\n      formModel: {},\n      labelsModel: {},\n      fieldPropsMap: {},\n      formModelCopy: {},\n\n      queryForm: {},\n      queryList: [],\n      flowData: [],\n      flowFlag: false,\n    };\n  },\n  computed: {\n    tableHeight() {\n      return this.$baseTableHeight();\n    },\n    formTitle() {\n      if (this.formState === FormState.NEW) {\n        return \"新建\" + this.entityLabel;\n      } else if (this.formState === FormState.EDIT) {\n        return \"编辑\" + this.entityLabel;\n      } else {\n        return this.entityLabel + \"详情\";\n      }\n    },\n  },\n  mounted() {\n    this.$nextTick(() => {\n      this.resizeTableHeight();\n    });\n    window.onresize = () => {\n      this.resizeTableHeight();\n    };\n\n    this.initTable();\n  },\n  methods: {\n    goBack() {\n      this.$router.back(-1);\n    },\n    handleDownload() {\n\n    },\n    setValue(value) {\n      this.formModel[value.key] = value.value;\n    },\n\n    async handleExecute(data, done) {\n      const { t, state, msg } = await executeToexamine(data);\n      this.$message({ type: state, message: msg });\n      this.loadTableData();\n      done();\n    },\n    resizeTableHeight() {\n      /* table自适应高度 */\n      this.$nextTick(() => {\n        if (this.$refs.tableContainer.$el) {\n          this.tableHeight = this.$refs.tableContainer.$el.offsetHeight - 42;\n          console.log(this.tableHeight);\n        }\n      });\n    },\n    async getQueryForm() {\n      const { t, state, msg } = await getColumnShowNoPage({\n        table_id: this.entity.id,\n      });\n      if (state == \"success\") {\n        this.queryList = t ? t : [];\n        // for (let i = 0; i < this.queryList.length; i++) {\n        //   this.queryForm[this.queryList[i].prop] = ''\n        // }\n      } else {\n        this.$message({\n          message: msg,\n          type: \"error\",\n        });\n      }\n    },\n    async initTable() {\n      if (!this.entity) {\n        this.$message.error(\"entity of prop is null\");\n        return;\n      }\n\n      if (this.customDataLoad === true) {\n        return;\n      }\n      const res = await this.crudMethods.initDataList({\n        table_id: this.entity.id,\n        table_name: this.entity.name,\n        pageNum: this.page.pageNo,\n        pageSize: this.page.limit,\n      });\n      if (res.state == \"error\") {\n        this.$message({ message: res.msg, type: \"error\" });\n        return;\n      }\n      this.getQueryForm();\n\n      // this.page.total = res.t.pagination.total\n      this.setTableData(res.t.columnList, res.t.dataList);\n      if (res && res.t && res.t.columnList && res.t.columnList.length > 0) {\n        this.flowFlag =\n          res.t.columnList[res.t.columnList.length - 1].prop ==\n          \"toexamine_result\"\n            ? true\n            : false;\n      }\n    },\n\n    /**/\n    setTableData(columnList, recordList) {\n      this.columns = columnList;\n      this.columns.forEach((col) => {\n        setColumnFormatter(col);\n      });\n      this.tableData = recordList;\n      this.$refs.SimpleTable.tabeldata = recordList;\n      this.$refs.SimpleTable.columns = columnList;\n    },\n\n    /* 保持查询条件，重新当前页加载数据 */\n    loadTableData(filter) {\n      let queryForm = {};\n      _.forEach(this.queryForm, (val, key) => {\n        if (_.isArray(val)) {\n          if (val.length > 0) {\n            queryForm[key] = val;\n          }\n        } else if (val) {\n          queryForm[key] = val;\n        }\n      });\n\n      getDataList(\n        {\n          table_id: this.entity.id,\n          table_name: this.entity.name,\n          pageSize: this.page.limit,\n          pageNum: this.page.pageNo,\n        },\n        queryForm\n      )\n        .then((res) => {\n          if (res.state == \"error\") {\n            this.$message({ message: res.msg, type: \"error\" });\n          } else {\n            this.tableData = res.t.dataList;\n            this.$refs.SimpleTable.tabeldata = this.tableData;\n            // this.page.total = res.t.pagination.total\n          }\n        })\n        .catch((res) => {\n          this.$message({ message: res.msg, type: \"error\" });\n        });\n    },\n\n    // 改变分页大小处理\n    handleSizeChange(val) {\n      if (this.customDataLoad === true) {\n        this.$emit(\"handleSizeChange\", val); //父组件发出消息，由父组件处理\n        return;\n      }\n\n      // this.page.limit = val\n      // this.page.pageNo = 1\n      this.loadTableData(this.searchFilter);\n    },\n\n    // 翻页处理\n    handleCurrentChange(val) {\n      if (this.customDataLoad === true) {\n        this.$emit(\"handleCurrentChange\", val); //父组件发出消息，由父组件处理\n        return;\n      }\n\n      // this.page.pageNo = val\n      this.loadTableData(this.searchFilter);\n    },\n\n    searchData() {\n      if (this.customDataLoad === true) {\n        this.$emit(\"searchData\", this.keyword); //父组件发出消息，由父组件处理\n        return;\n      }\n\n      if (!this.nameFieldName) {\n        this.$message.error(\n          \"当前实体[\" + this.entity + \"]未指定名称字段，不能搜索！\"\n        );\n        return;\n      }\n\n      let searchField = this.nameFieldName;\n      let searchWord = this.keyword;\n      this.searchFilter = `([${searchField}] like '%${searchWord}%')`;\n      this.loadTableData(this.searchFilter);\n    },\n\n    clearSearch() {\n      if (this.customDataLoad === true) {\n        this.keyword = \"\";\n        this.$emit(\"clearSearch\"); //父组件发出消息，由父组件处理\n        return;\n      }\n\n      this.searchFilter = \"\";\n      this.loadTableData();\n    },\n\n    refreshTableData() {\n      if (this.customDataLoad === true) {\n        this.$emit(\"refreshTable\"); //父组件发出消息，由父组件处理\n        return;\n      }\n\n      this.loadTableData(this.searchFilter);\n    },\n\n    addNewRecord() {\n      if (this.customAddAction === true) {\n        this.$emit(\"addTableRecord\"); //父组件发出消息，由父组件处理\n        return;\n      }\n\n      this.crudMethods\n        .createRecord({\n          table_id: this.entity.id,\n          table_name: this.entity.name,\n        })\n        .then((res) => {\n          if (res.state == \"error\") {\n            this.$message({ message: res.error, type: \"error\" });\n            return;\n          }\n          if (!!res.t && !!res.t.layoutJson) {\n            this.curRecordId = null;\n            this.layout = this.buildLayoutObj();\n            this.layout.setLayoutPropsFromServer(res, \"add\");\n            this.handleDeletedFields(res); /* 处理表单已删除字段！！ */\n            this.formModel = res.t.formData;\n            this.formModelCopy = JSON.parse(JSON.stringify(res.t.formData));\n            this.labelsModel = res.t.labelData;\n            this.fieldPropsMap = res.t.fieldPropsMap;\n            this.formState = FormState.NEW;\n            this.showFormDialogFlag = true;\n            if (this.$refs[\"formWidget\"]) {\n              this.$refs[\"formWidget\"].clearFormValidate();\n            }\n          } else {\n            this.$message({ message: \"加载表单布局出错\", type: \"error\" });\n          }\n        })\n        .catch((res) => {\n          this.$message({ message: res.message, type: \"error\" });\n        });\n    },\n\n    buildLayoutObj() {\n      let eventHub = new Vue();\n      return createLayoutObj(eventHub);\n    },\n\n    handleDeletedFields(res) {\n      let deletedFields = res.t.deletedFields;\n      if (!!deletedFields && Array.isArray(deletedFields)) {\n        let layoutFieldWrappers = this.layout.getAllLayoutFieldWrappers();\n        if (!!layoutFieldWrappers && Array.isArray(layoutFieldWrappers)) {\n          layoutFieldWrappers.forEach((fw) => {\n            let deletedFlag = arrayContain(deletedFields, fw.name);\n            if (deletedFlag) {\n              fw.deleted = true; /* 设置已删除字段标志 */\n            }\n          });\n        }\n      }\n    },\n\n    editTableData(row) {\n      if (this.customEditAction === true) {\n        this.$emit(\"editTableRow\", row); //向父组件发出消息，由父组件处理\n        return;\n      }\n\n      this.curRecordId = row[this.idFieldName];\n      this.crudMethods\n        .updateRecord({\n          data_id: row.id,\n          table_id: this.entity.id,\n          table_name: this.entity.name,\n        })\n        .then((res) => {\n          if (res.state == \"error\") {\n            this.$message({ message: res.msg, type: \"error\" });\n            return;\n          }\n\n          if (!!res.t && !!res.t.layoutJson) {\n            this.layout = this.buildLayoutObj();\n            this.layout.setLayoutPropsFromServer(res, \"add\");\n            this.handleDeletedFields(res); /* 处理表单已删除字段！！ */\n            this.formModel = res.t.formData;\n            this.formModelCopy = JSON.parse(JSON.stringify(res.t.formData));\n            this.labelsModel = res.t.labelData;\n            this.fieldPropsMap = res.t.fieldPropsMap;\n            this.formState = FormState.EDIT; //编辑记录状态\n            this.showFormDialogFlag = true;\n            if (this.$refs[\"formWidget\"]) {\n              this.$refs[\"formWidget\"].clearFormValidate();\n            }\n          } else {\n            this.$message({ message: \"加载表单布局出错\", type: \"error\" });\n          }\n        })\n        .catch((res) => {\n          this.$message({ message: res.message, type: \"error\" });\n        });\n    },\n\n    hadelSave(postData) {\n      this.crudMethods\n        .saveRecord(\n          {\n            table_id: this.entity.id,\n            table_name: this.entity.name,\n            data_id: this.formModel.id,\n            operation_type: this.formModel.id ? 2 : 1,\n          },\n          postData\n        )\n        .then((res) => {\n          if (res.state == \"error\") {\n            this.$message({ message: res.msg, type: \"error\" });\n            return;\n          }\n          // console.log(res);\n          // this.formModel = res.t.formData;\n          // this.labelsModel = res.t.labelData;\n          this.$message({ message: \"保存成功\", type: \"success\" });\n          this.showFormDialogFlag = false;\n          this.loadTableData(this.searchFilter);\n        })\n        .catch((res) => {\n          this.$message({ message: res.msg, type: \"error\" });\n        });\n    },\n    deleteTableData(row) {\n      if (this.customDeleteAction === true) {\n        this.$emit(\"deleteTableRow\", row); //向父组件发出消息，由父组件处理\n        return;\n      }\n\n      this.$confirm(\"是否删除该数据?\", \"删除确认\")\n        .then(() => {\n          this.crudMethods\n            .deleteRecord({\n              data_id: row.id,\n              table_id: this.entity.id,\n              table_name: this.entity.name,\n            })\n            .then((res) => {\n              if (res.state == \"error\") {\n                this.$message({ message: res.msg, type: \"error\" });\n                return;\n              }\n\n              this.$message.success(\"删除成功\");\n              this.loadTableData(this.searchFilter);\n            })\n            .catch((res) => {\n              this.$message({ message: res.message, type: \"error\" });\n            });\n        })\n        .catch(() => {\n          this.$message.info(\"取消删除\");\n        });\n    },\n    handleClose(done) {\n      this.$confirm(\"确认关闭？\")\n        .then(() => {\n          done();\n        })\n        .catch(() => {});\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.dataList-container {\n  ::v-deep .el-main {\n    padding: 0;\n  }\n}\n\n.el-container {\n  padding: 10px;\n  header {\n    border: 0;\n  }\n}\n.list-search-panel {\n  height: auto !important;\n  //line-height: 62px;\n  //border-left: 1px solid #ebeef5;\n  margin-bottom: 0;\n  .el-form--inline {\n    display: inline-flex;\n    align-content: center;\n    .el-form-item__content {\n      vertical-align: middle;\n    }\n  }\n}\n\n.list-search-panel:after {\n  content: \"\";\n  display: block;\n  clear: both;\n}\n\n.search-panel-left {\n  float: left;\n}\n\n.search-panel-right {\n  float: right;\n\n  /* 解决IE浮动元素垂直居中问题 begin */\n  position: relative;\n  ::v-deep .el-form-item {\n    margin-bottom: 0;\n  }\n  ::v-deep .el-input.v-middle {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n  }\n  /* end */\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=e0ed7436&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=e0ed7436&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e0ed7436\",\n  null\n  \n)\n\nexport default component.exports","<!--\n * @Author: zhang jianrong\n * @Date: 2022-02-15 09:52:57\n * @LastEditors: zhang jianrong\n * @LastEditTime: 2022-02-16 15:01:29\n * @Description: file content\n-->\n<template>\n  <el-container direction=\"horizontal\">\n    <data-list :entity=\"entity\"></data-list>\n  </el-container>\n</template>\n\n<script>\n  import DataList from \"@/components/business/DataList\";\n\n  export default {\n    name: \"DataListView\",\n    components: { DataList },\n    props: {\n      entity: {\n        type: Object,\n        //default: 'Account'\n      },\n    },\n  };\n</script>\n\n<style lang=\"scss\" scoped>\n  .el-container {\n    width: 100% !important;\n    overflow-x: hidden; /* 注意：IE浏览器中会出现水平滚动条，暂未找到原因！！ */\n  }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./data-list-view.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./data-list-view.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./data-list-view.vue?vue&type=template&id=630d4e5c&scoped=true&\"\nimport script from \"./data-list-view.vue?vue&type=script&lang=js&\"\nexport * from \"./data-list-view.vue?vue&type=script&lang=js&\"\nimport style0 from \"./data-list-view.vue?vue&type=style&index=0&id=630d4e5c&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"630d4e5c\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}