{"version":3,"sources":["webpack:///./src/views/system/field-editor/reference-widget-editor.vue?99f4","webpack:///src/views/system/field-editor/reference-widget-editor.vue","webpack:///./src/views/system/field-editor/reference-widget-editor.vue?705b","webpack:///./src/views/system/field-editor/reference-widget-editor.vue","webpack:///./src/views/system/field-editor/reference-widget-editor.vue?8bd5","webpack:///./src/views/system/field-state-variables.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","showingInDialog","_e","_v","ref","attrs","fieldProps","rules","nativeOn","$event","preventDefault","fieldState","model","value","callback","$$v","$set","expression","refEntityAndFields","referenceSetting","on","clearReferTo","slot","showRefEntitySettingDialog","staticStyle","fieldViewModel","_n","_l","vt","vtIdx","key","label","saveField","cancelSave","showRefEntityDialogFlag","refEntityFullName","showEntityListDialog","fieldItems","length","fieldItem","idx","isSelectedField","setRefEntityListField","_s","name","selectedFieldItems","selectedField","selectedIdx","setRefEntity","showEntityListDialogFlag","columns","tableData","scopedSlots","_u","fn","scope","selectEntity","row","staticRenderFns","component","NEW","EDIT"],"mappings":"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","file":"js/chunk-c7fbc7d8.b48dc226.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-container',{staticClass:\"field-props-container\"},[(!!!_vm.showingInDialog)?_c('el-header',{staticClass:\"field-props-header\"},[_vm._v(\" [一对一引用]字段属性设置 \")]):_vm._e(),_c('el-main',{staticClass:\"field-props-pane\"},[_c('el-form',{ref:\"editorForm\",attrs:{\"model\":_vm.fieldProps,\"rules\":_vm.rules,\"label-position\":\"left\",\"label-width\":\"220px\",\"size\":\"mini\"},nativeOn:{\"submit\":function($event){$event.preventDefault();}}},[_c('el-form-item',{attrs:{\"label\":\"字段名称\",\"prop\":\"name\"}},[_c('el-input',{attrs:{\"readonly\":_vm.fieldState !== 1},model:{value:(_vm.fieldProps.name),callback:function ($$v) {_vm.$set(_vm.fieldProps, \"name\", $$v)},expression:\"fieldProps.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"显示名称\",\"prop\":\"label\"}},[_c('el-input',{model:{value:(_vm.fieldProps.label),callback:function ($$v) {_vm.$set(_vm.fieldProps, \"label\", $$v)},expression:\"fieldProps.label\"}})],1),_c('el-form-item',{attrs:{\"label\":\"引用实体\"}},[_c('el-input',{attrs:{\"readonly\":\"\"},model:{value:(_vm.refEntityAndFields),callback:function ($$v) {_vm.refEntityAndFields=$$v},expression:\"refEntityAndFields\"}},[(_vm.fieldState === 1 || _vm.fieldState === 2)?[(!!_vm.fieldProps.referenceSetting)?_c('el-button',{attrs:{\"slot\":\"append\",\"icon\":\"el-icon-close\",\"title\":\"清除\"},on:{\"click\":_vm.clearReferTo},slot:\"append\"}):_vm._e(),_c('el-button',{attrs:{\"slot\":\"append\",\"icon\":\"el-icon-search\",\"title\":\"选择\"},on:{\"click\":_vm.showRefEntitySettingDialog},slot:\"append\"})]:_vm._e()],2)],1),_c('el-form-item',{attrs:{\"label\":\"搜索弹窗宽度（单位：像素）：\"}},[_c('el-input-number',{staticStyle:{\"width\":\"100%\"},attrs:{\"type\":\"number\"},model:{value:(_vm.fieldProps.fieldViewModel.searchDialogWidth),callback:function ($$v) {_vm.$set(_vm.fieldProps.fieldViewModel, \"searchDialogWidth\", _vm._n($$v))},expression:\"fieldProps.fieldViewModel.searchDialogWidth\"}})],1),_c('el-form-item',{attrs:{\"label\":\"字段校验函数(可多选)\",\"prop\":\"fieldViewModel.validators\"}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"multiple\":\"\",\"allow-create\":\"\",\"filterable\":\"\",\"default-first-option\":\"\",\"popper-append-to-body\":false},model:{value:(_vm.fieldProps.fieldViewModel.validators),callback:function ($$v) {_vm.$set(_vm.fieldProps.fieldViewModel, \"validators\", $$v)},expression:\"fieldProps.fieldViewModel.validators\"}},_vm._l((_vm.validators),function(vt,vtIdx){return _c('el-option',{key:vtIdx,attrs:{\"label\":vt.label,\"value\":vt.value}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"是否允许空值\"}},[_c('el-radio-group',{staticStyle:{\"float\":\"right\"},model:{value:(_vm.fieldProps.nullable),callback:function ($$v) {_vm.$set(_vm.fieldProps, \"nullable\", $$v)},expression:\"fieldProps.nullable\"}},[_c('el-radio',{attrs:{\"label\":true}},[_vm._v(\"是\")]),_c('el-radio',{attrs:{\"label\":false}},[_vm._v(\"否\")])],1)],1),_c('el-form-item',{attrs:{\"label\":\"新建记录时允许修改字段\"}},[_c('el-radio-group',{staticStyle:{\"float\":\"right\"},model:{value:(_vm.fieldProps.creatable),callback:function ($$v) {_vm.$set(_vm.fieldProps, \"creatable\", $$v)},expression:\"fieldProps.creatable\"}},[_c('el-radio',{attrs:{\"label\":true}},[_vm._v(\"是\")]),_c('el-radio',{attrs:{\"label\":false}},[_vm._v(\"否\")])],1)],1),_c('el-form-item',{attrs:{\"label\":\"更新记录时允许修改字段\"}},[_c('el-radio-group',{staticStyle:{\"float\":\"right\"},model:{value:(_vm.fieldProps.updatable),callback:function ($$v) {_vm.$set(_vm.fieldProps, \"updatable\", $$v)},expression:\"fieldProps.updatable\"}},[_c('el-radio',{attrs:{\"label\":true}},[_vm._v(\"是\")]),_c('el-radio',{attrs:{\"label\":false}},[_vm._v(\"否\")])],1)],1),_c('hr',{staticStyle:{\"border\":\"0\",\"border-top\":\"1px dotted #cccccc\"}}),_c('el-form-item',[_c('el-button',{staticStyle:{\"width\":\"120px\"},attrs:{\"type\":\"primary\",\"size\":\"medium\"},on:{\"click\":_vm.saveField}},[_vm._v(\" 保存字段 \")]),(!!_vm.showingInDialog)?_c('el-button',{attrs:{\"size\":\"medium\"},on:{\"click\":_vm.cancelSave}},[_vm._v(\" 取消 \")]):_vm._e()],1)],1)],1),(_vm.showRefEntityDialogFlag)?_c('el-dialog',{staticClass:\"refer-entity-dialog\",attrs:{\"title\":\"引用实体设置\",\"visible\":_vm.showRefEntityDialogFlag,\"append-to-body\":true,\"width\":\"560px\"},on:{\"update:visible\":function($event){_vm.showRefEntityDialogFlag=$event}}},[_c('el-container',[_c('el-header',[_c('el-input',{attrs:{\"size\":\"small\",\"placeholder\":\"请选择引用实体\",\"readonly\":true},model:{value:(_vm.refEntityFullName),callback:function ($$v) {_vm.refEntityFullName=$$v},expression:\"refEntityFullName\"}},[(_vm.fieldState === 1)?_c('el-button',{attrs:{\"slot\":\"append\",\"icon\":\"el-icon-search\",\"title\":\"选择\"},on:{\"click\":_vm.showEntityListDialog},slot:\"append\"}):_vm._e()],1)],1),_c('el-main',[_c('div',[_c('div',{staticStyle:{\"margin-bottom\":\"6px\"}},[_vm._v(\"选择实体搜索列表字段：\")]),_c('el-card',{attrs:{\"shadow\":\"never\"}},[(_vm.fieldItems.length <= 0)?_c('div',{staticStyle:{\"font-style\":\"italic\"}},[_vm._v(\" 暂无字段可选 \")]):_vm._e(),_vm._l((_vm.fieldItems),function(fieldItem,idx){return _c('el-checkbox',{key:idx,attrs:{\"checked\":_vm.isSelectedField(fieldItem)},on:{\"change\":function (value) { return _vm.setRefEntityListField(fieldItem, value); }}},[_vm._v(\" \"+_vm._s(fieldItem.label)+\"(\"+_vm._s(fieldItem.name)+\") \")])})],2)],1),_c('div',[_c('div',{staticStyle:{\"margin\":\"20px 0 6px\"}},[_vm._v(\"已选择的显示字段：\")]),_c('el-card',{attrs:{\"shadow\":\"never\"}},[(_vm.selectedFieldItems.length <= 0)?_c('div',{staticStyle:{\"font-style\":\"italic\"}},[_vm._v(\" 未选择显示字段 \")]):_vm._e(),_vm._l((_vm.selectedFieldItems),function(selectedField,selectedIdx){return _c('div',{key:selectedIdx},[_vm._v(\" \"+_vm._s(selectedField.label)+\"(\"+_vm._s(selectedField.name)+\") \")])})],2)],1)])],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.showRefEntityDialogFlag = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.setRefEntity}},[_vm._v(\"确 定\")])],1)],1):_vm._e(),(_vm.showEntityListDialogFlag)?_c('el-dialog',{ref:\"entityListDlg\",staticClass:\"entity-list-dialog\",attrs:{\"title\":\"选择引用实体\",\"visible\":_vm.showEntityListDialogFlag,\"append-to-body\":true,\"destroy-on-close\":true,\"width\":\"560px\"},on:{\"update:visible\":function($event){_vm.showEntityListDialogFlag=$event}}},[_c('SimpleTable',{attrs:{\"show-pagination\":false,\"show-check-box\":false,\"table-size\":'mini',\"columns\":_vm.columns,\"data\":_vm.tableData,\"max-height\":420}},[_c('el-table-column',{attrs:{\"slot\":\"table_operation\",\"align\":\"center\",\"label\":\"\",\"width\":\"150\",\"resizable\":false},slot:\"table_operation\",scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"icon\":\"el-icon-check\"},on:{\"click\":function($event){return _vm.selectEntity(scope.row)}}},[_vm._v(\" 选择 \")])]}}],null,false,3208075432)})],1)],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <el-container class=\"field-props-container\">\n    <el-header class=\"field-props-header\" v-if=\"!!!showingInDialog\">\n      [一对一引用]字段属性设置\n    </el-header>\n    <el-main class=\"field-props-pane\">\n      <el-form\n        ref=\"editorForm\"\n        :model=\"fieldProps\"\n        :rules=\"rules\"\n        label-position=\"left\"\n        label-width=\"220px\"\n        size=\"mini\"\n        @submit.native.prevent\n      >\n        <el-form-item label=\"字段名称\" prop=\"name\">\n          <el-input\n            v-model=\"fieldProps.name\"\n            :readonly=\"fieldState !== 1\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item label=\"显示名称\" prop=\"label\">\n          <el-input v-model=\"fieldProps.label\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"引用实体\">\n          <el-input v-model=\"refEntityAndFields\" readonly>\n            <template v-if=\"fieldState === 1 || fieldState === 2\">\n              <el-button\n                slot=\"append\"\n                icon=\"el-icon-close\"\n                title=\"清除\"\n                v-if=\"!!fieldProps.referenceSetting\"\n                @click=\"clearReferTo\"\n              ></el-button>\n              <el-button\n                slot=\"append\"\n                icon=\"el-icon-search\"\n                title=\"选择\"\n                @click=\"showRefEntitySettingDialog\"\n              ></el-button>\n            </template>\n          </el-input>\n        </el-form-item>\n        <el-form-item label=\"搜索弹窗宽度（单位：像素）：\">\n          <el-input-number\n            type=\"number\"\n            v-model.number=\"fieldProps.fieldViewModel.searchDialogWidth\"\n            style=\"width: 100%\"\n          ></el-input-number>\n        </el-form-item>\n        <el-form-item\n          label=\"字段校验函数(可多选)\"\n          prop=\"fieldViewModel.validators\"\n        >\n          <el-select\n            multiple\n            allow-create\n            filterable\n            default-first-option\n            :popper-append-to-body=\"false\"\n            v-model=\"fieldProps.fieldViewModel.validators\"\n            style=\"width: 100%\"\n          >\n            <el-option\n              v-for=\"(vt, vtIdx) in validators\"\n              :key=\"vtIdx\"\n              :label=\"vt.label\"\n              :value=\"vt.value\"\n            ></el-option>\n          </el-select>\n        </el-form-item>\n\n        <el-form-item label=\"是否允许空值\">\n          <el-radio-group v-model=\"fieldProps.nullable\" style=\"float: right\">\n            <el-radio :label=\"true\">是</el-radio>\n            <el-radio :label=\"false\">否</el-radio>\n          </el-radio-group>\n        </el-form-item>\n        <el-form-item label=\"新建记录时允许修改字段\">\n          <el-radio-group v-model=\"fieldProps.creatable\" style=\"float: right\">\n            <el-radio :label=\"true\">是</el-radio>\n            <el-radio :label=\"false\">否</el-radio>\n          </el-radio-group>\n        </el-form-item>\n        <el-form-item label=\"更新记录时允许修改字段\">\n          <el-radio-group v-model=\"fieldProps.updatable\" style=\"float: right\">\n            <el-radio :label=\"true\">是</el-radio>\n            <el-radio :label=\"false\">否</el-radio>\n          </el-radio-group>\n        </el-form-item>\n        <hr style=\"border: 0; border-top: 1px dotted #cccccc\" />\n        <el-form-item>\n          <el-button\n            type=\"primary\"\n            size=\"medium\"\n            style=\"width: 120px\"\n            @click=\"saveField\"\n          >\n            保存字段\n          </el-button>\n          <el-button size=\"medium\" v-if=\"!!showingInDialog\" @click=\"cancelSave\">\n            取消\n          </el-button>\n        </el-form-item>\n      </el-form>\n    </el-main>\n\n    <el-dialog\n      title=\"引用实体设置\"\n      class=\"refer-entity-dialog\"\n      :visible.sync=\"showRefEntityDialogFlag\"\n      v-if=\"showRefEntityDialogFlag\"\n      :append-to-body=\"true\"\n      width=\"560px\"\n    >\n      <el-container>\n        <el-header>\n          <el-input\n            size=\"small\"\n            placeholder=\"请选择引用实体\"\n            v-model=\"refEntityFullName\"\n            :readonly=\"true\"\n          >\n            <el-button\n              slot=\"append\"\n              v-if=\"fieldState === 1\"\n              icon=\"el-icon-search\"\n              title=\"选择\"\n              @click=\"showEntityListDialog\"\n            ></el-button>\n          </el-input>\n        </el-header>\n        <el-main>\n          <div>\n            <div style=\"margin-bottom: 6px\">选择实体搜索列表字段：</div>\n            <!--            <hr style=\"border: 0;border-top: 1px solid rgb(220, 223, 230)\" />-->\n            <el-card shadow=\"never\">\n              <div style=\"font-style: italic\" v-if=\"fieldItems.length <= 0\">\n                暂无字段可选\n              </div>\n              <el-checkbox\n                v-for=\"(fieldItem, idx) in fieldItems\"\n                :key=\"idx\"\n                :checked=\"isSelectedField(fieldItem)\"\n                @change=\"(value) => setRefEntityListField(fieldItem, value)\"\n              >\n                {{ fieldItem.label }}({{ fieldItem.name }})\n              </el-checkbox>\n            </el-card>\n          </div>\n          <div>\n            <div style=\"margin: 20px 0 6px\">已选择的显示字段：</div>\n            <el-card shadow=\"never\">\n              <div\n                style=\"font-style: italic\"\n                v-if=\"selectedFieldItems.length <= 0\"\n              >\n                未选择显示字段\n              </div>\n              <div\n                v-for=\"(selectedField, selectedIdx) in selectedFieldItems\"\n                :key=\"selectedIdx\"\n              >\n                {{ selectedField.label }}({{ selectedField.name }})\n              </div>\n            </el-card>\n          </div>\n        </el-main>\n      </el-container>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"showRefEntityDialogFlag = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"setRefEntity\">确 定</el-button>\n      </div>\n    </el-dialog>\n\n    <el-dialog\n      ref=\"entityListDlg\"\n      title=\"选择引用实体\"\n      :visible.sync=\"showEntityListDialogFlag\"\n      v-if=\"showEntityListDialogFlag\"\n      :append-to-body=\"true\"\n      :destroy-on-close=\"true\"\n      class=\"entity-list-dialog\"\n      width=\"560px\"\n    >\n      <SimpleTable\n        :show-pagination=\"false\"\n        :show-check-box=\"false\"\n        :table-size=\"'mini'\"\n        :columns=\"columns\"\n        :data=\"tableData\"\n        :max-height=\"420\"\n      >\n        <el-table-column\n          slot=\"table_operation\"\n          align=\"center\"\n          label=\"\"\n          width=\"150\"\n          :resizable=\"false\"\n        >\n          <template slot-scope=\"scope\">\n            <el-button\n              class=\"\"\n              icon=\"el-icon-check\"\n              @click=\"selectEntity(scope.row)\"\n            >\n              选择\n            </el-button>\n          </template>\n        </el-table-column>\n      </SimpleTable>\n    </el-dialog>\n  </el-container>\n</template>\n\n<script>\n  // import {\n  //   addRefField,\n  //   updateRefField,\n  //   getRefFieldExtras,\n  //   getEntitySet,\n  //   getFieldSet,\n  //   getField\n  // } from '@/api/system-manager'\n  import { copyObj } from \"@/utils/util\";\n  import FieldState from \"@/views/system/field-state-variables\";\n\n  export default {\n    name: \"ReferenceWidgetEditor\",\n    props: {\n      entity: String,\n      fieldName: String,\n      showingInDialog: Boolean,\n      fieldState: {\n        type: Number,\n        default: FieldState.NEW /* 1新建字段，2编辑字段 */,\n      },\n    },\n    data() {\n      return {\n        fieldProps: {\n          name: \"\",\n          label: \"\",\n          type: \"Reference\",\n          defaultMemberOfListFlag: true,\n          nullable: false,\n          creatable: true,\n          updatable: true,\n          fieldViewModel: {\n            searchDialogWidth: 520,\n            validators: [],\n          },\n          referenceSetting: null,\n        },\n\n        rules: {\n          name: [\n            { required: true, message: \"请输入字段名称\", trigger: \"blur\" },\n            {\n              pattern: /^[a-z]+[A-Za-z\\d]*$/,\n              message: \"请以小写英文字母开头，中间可输入字母或数字，禁止中文\",\n              trigger: \"blur\",\n            },\n            { min: 2, max: 30, message: \"请输入至少两个字符\", trigger: \"blur\" },\n          ],\n          label: [\n            { required: true, message: \"请输入显示名称\", trigger: \"blur\" },\n            {\n              pattern: /^[A-Za-z\\d\\u4e00-\\u9fa5]+[_-]*/,\n              message: \"请以中文、英文字母、数字开头，中间可输入下划线或横杠\",\n              trigger: \"blur\",\n            },\n            { min: 2, max: 30, message: \"请输入至少两个字符\", trigger: \"blur\" },\n          ],\n        },\n        validators: [],\n\n        currentRefEntity: \"\",\n        refEntityAndFields: \"\",\n\n        refEntityName: \"\",\n        refEntityLabel: \"\",\n        refEntityFullName: \"\",\n\n        showRefEntityDialogFlag: false,\n        showEntityListDialogFlag: false,\n\n        fieldItems: [],\n        selectedFieldItems: [],\n\n        columns: [\n          { prop: \"name\", label: \"实体名称\", width: \"150\", align: \"center\" },\n          {\n            prop: \"label\",\n            label: \"显示名称\",\n            width: \"200\",\n            align: \"center\",\n            formatter: this.formatter,\n          },\n        ],\n        tableData: [],\n      };\n    },\n    mounted() {\n      if (this.fieldState === FieldState.EDIT) {\n        this.getFieldProps();\n      }\n    },\n    methods: {\n      getFieldProps() {\n        // getField(this.fieldName, this.entity)\n        //   .then((res) => {\n        //     if (res.error != null) {\n        //       this.$message({ message: res.error, type: \"error\" });\n        //       return;\n        //     }\n        //     this.readFieldProps(res.data);\n        //   })\n        //   .catch((res) => {\n        //     this.$message({ message: res.message, type: \"error\" });\n        //   });\n      },\n\n      readFieldProps(savedProps) {\n        copyObj(this.fieldProps, savedProps);\n        //console.log(this.fieldProps)\n        if (!this.fieldProps.fieldViewModel) {\n          //设置搜索弹窗默认宽度\n          this.fieldProps[\"fieldViewModel\"] = {\n            searchDialogWidth: 520,\n          };\n        }\n        if (savedProps.entityCode) {\n          this.fieldProps.entityCode = savedProps.entityCode;\n        }\n        //console.log(JSON.stringify(this.fieldProps))\n\n        // getRefFieldExtras(savedProps.name, this.entity)\n        //   .then((res) => {\n        //     if (res.error != null) {\n        //       this.$message({ message: res.error, type: \"error\" });\n        //       return;\n        //     }\n\n        //     this.currentRefEntity = res.data.currentRefEntity;\n        //     this.refEntityName = res.data.refEntityName;\n        //     this.refEntityLabel = res.data.refEntityLabel;\n        //     this.refEntityFullName = res.data.refEntityFullName;\n        //     this.refEntityAndFields = res.data.refEntityAndFields;\n        //     this.fieldItems = res.data.fieldItems;\n        //     this.selectedFieldItems = res.data.selectedFieldItems;\n        //   })\n        //   .catch((res) => {\n        //     this.$message({ message: res.error, type: \"error\" });\n        //   });\n      },\n\n      saveField() {\n        let validResult = true;\n        this.$refs[\"editorForm\"].validate((success) => {\n          if (!success) {\n            validResult = false;\n            return false;\n          }\n        });\n        if (!validResult) return;\n\n        if (!this.fieldProps.referenceSetting) {\n          this.$message.error(\"请设置引用实体！\");\n          return;\n        }\n\n        this.fieldProps.type = \"Reference\";\n        //console.log( JSON.stringify(this.fieldProps) )\n        // let saveMethod = addRefField;\n        // if (this.fieldState === FieldState.EDIT) {\n        //   saveMethod = updateRefField;\n        // }\n        // saveMethod(this.fieldProps, this.entity, this.currentRefEntity)\n        //   .then((res) => {\n        //     if (res.error != null) {\n        //       this.$message({ message: res.error, type: \"error\" });\n        //       return;\n        //     }\n\n        //     this.$message.success(\"保存成功\");\n        //     this.$emit(\"fieldSaved\");\n        //   })\n        //   .catch((res) => {\n        //     this.$message({ message: res.message, type: \"error\" });\n        //   });\n      },\n\n      cancelSave() {\n        this.$emit(\"cancelSave\");\n      },\n\n      clearReferTo() {\n        this.currentRefEntity = \"\";\n        this.refEntityAndFields = \"\";\n        this.fieldProps.referenceSetting = null;\n      },\n\n      showRefEntitySettingDialog() {\n        this.showRefEntityDialogFlag = true;\n      },\n\n      setRefEntity() {\n        if (this.selectedFieldItems.length <= 0) {\n          this.$message.info(\"请至少选择一个显示字段！\");\n          return;\n        }\n\n        let tempStr = this.refEntityLabel + \"[\";\n        for (let i = 0; i < this.selectedFieldItems.length; i++) {\n          tempStr += this.selectedFieldItems[i].label + \",\";\n        }\n        tempStr += \"]\";\n        this.refEntityAndFields = tempStr;\n\n        this.currentRefEntity = this.refEntityName;\n        let fieldList = [];\n        this.selectedFieldItems.forEach((item) => {\n          fieldList.push(item.name);\n        });\n        this.fieldProps.referenceSetting = [\n          { entityName: this.currentRefEntity, fieldList: fieldList },\n        ];\n        // console.log( JSON.stringify(this.fieldProps.referenceSetting) )\n\n        this.showRefEntityDialogFlag = false;\n      },\n\n      showEntityListDialog() {\n        this.tableData.length = 0;\n        // getEntitySet()\n        //   .then((res) => {\n        //     if (res.error != null) {\n        //       this.$message({ message: res.error, type: \"error\" });\n        //       return;\n        //     }\n        //     let entityItems = res.data;\n        //     if (!!entityItems) {\n        //       entityItems.filter((entity) => {\n        //         if (entity.detailEntityFlag === false) {\n        //           this.tableData.push({\n        //             name: entity.name,\n        //             label: entity.label,\n        //           });\n        //         }\n        //       });\n        //     }\n        //     this.showEntityListDialogFlag = true;\n        //   })\n        //   .catch((res) => {\n        //     this.$message({ message: res.message, type: \"error\" });\n        //   });\n      },\n\n      selectEntity(row) {\n        this.refEntityName = row.name;\n        this.refEntityLabel = row.label;\n        this.refEntityFullName =\n          this.refEntityLabel + \"(\" + this.refEntityName + \")\";\n        this.showEntityListDialogFlag = false;\n\n        this.fieldItems.length = 0;\n        // getFieldSet(this.refEntityName)\n        //   .then((res) => {\n        //     if (res.error != null) {\n        //       this.$message({ message: res.error, type: \"error\" });\n        //       return;\n        //     }\n        //     let resultList = res.data;\n        //     if (!!resultList) {\n        //       resultList.filter((item) => {\n        //         if (item.type !== \"PrimaryKey\") {\n        //           this.fieldItems.push(item);\n        //         }\n        //       });\n        //     }\n        //   })\n        //   .catch((res) => {\n        //     this.$message({ message: res.message, type: \"error\" });\n        //   });\n      },\n\n      setRefEntityListField(fieldItem, value) {\n        if (value) {\n          this.selectedFieldItems.push(fieldItem);\n        } else {\n          for (let i = this.selectedFieldItems.length - 1; i >= 0; i--) {\n            if (this.selectedFieldItems[i].name === fieldItem.name) {\n              this.selectedFieldItems.splice(i, 1);\n            }\n          }\n        }\n      },\n\n      isSelectedField(fieldItem) {\n        //console.log(fieldItem)\n        //console.log(this.selectedFieldItems)\n        let matchedFlag = false;\n        this.selectedFieldItems.forEach((item) => {\n          if (fieldItem.name === item.name) {\n            matchedFlag = true;\n          }\n        });\n        return matchedFlag;\n      },\n    },\n  };\n</script>\n\n<style lang=\"scss\" scoped>\n  @import \"@/styles/form-layout/field-editor-common.scss\";\n\n  .refer-entity-dialog,\n  .entity-list-dialog {\n    ::v-deep .el-dialog__header {\n      padding: 15px;\n      padding-bottom: 3px;\n    }\n\n    ::v-deep .el-dialog__body {\n      padding: 6px;\n    }\n  }\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./reference-widget-editor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./reference-widget-editor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./reference-widget-editor.vue?vue&type=template&id=f1d72550&scoped=true&\"\nimport script from \"./reference-widget-editor.vue?vue&type=script&lang=js&\"\nexport * from \"./reference-widget-editor.vue?vue&type=script&lang=js&\"\nimport style0 from \"./reference-widget-editor.vue?vue&type=style&index=0&id=f1d72550&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f1d72550\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../../node_modules/_sass-loader@8.0.2@sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./reference-widget-editor.vue?vue&type=style&index=0&id=f1d72550&lang=scss&scoped=true&\"","/* 字段状态：1新建，2编辑 */\nconst NEW = 1\nconst EDIT = 2\n\nexport default {\n  NEW,\n  EDIT,\n}\n"],"sourceRoot":""}