/*!
 *  build: vue-admin-beautiful 
 *  copyright: chuzhixin 1204505056@qq.com 
 *  time: 2021-3-25 09:05:49
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-da36a65c"],{2286:function(e,t,r){},"283b":function(e,t,r){"use strict";r.r(t),r.d(t,"getTransferList",(function(){return n})),r.d(t,"transferTest",(function(){return i})),r.d(t,"saveTransfer",(function(){return s})),r.d(t,"editTransfer",(function(){return o})),r.d(t,"delTransfer",(function(){return l}));var a=r("b775");function n(e){return Object(a["default"])({url:"/transfer/findByFactor",method:"get",params:e})}function i(e){return Object(a["default"])({url:"/transfer/findTest",method:"post",data:e})}function s(e){return Object(a["default"])({url:"/transfer/insert",method:"post",data:e})}function o(e){return Object(a["default"])({url:"/transfer/update",method:"put",data:e})}function l(e){return Object(a["default"])({url:"/transfer/delete",method:"delete",data:e})}},4278:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"webservice-container"},[r("el-drawer",{ref:"drawer",attrs:{visible:e.dialog,direction:"rtl",modal:!1,size:"70%","append-to-body":!0,"with-header":!1},on:{"update:visible":function(t){e.dialog=t},closed:e.closed}},[r("div",{staticClass:"demo-drawer__content"},[r("div",{},[r("el-form",{ref:"dcRequestAPI",staticClass:"from",attrs:{model:e.dcRequestAPI,rules:e.rules,"label-width":"100px"}},[r("el-row",[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"接口名称:",prop:"name"}},[r("el-input",{attrs:{placeholder:"接口名称"},model:{value:e.dcRequestAPI.name,callback:function(t){e.$set(e.dcRequestAPI,"name",t)},expression:"dcRequestAPI.name"}})],1)],1),r("el-col",{attrs:{span:18}},[r("el-form-item",{attrs:{label:"请求路径:",prop:"url"}},[r("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入请求路径"},model:{value:e.dcRequestAPI.url,callback:function(t){e.$set(e.dcRequestAPI,"url",t)},expression:"dcRequestAPI.url"}},[r("el-select",{staticStyle:{width:"98px"},attrs:{slot:"prepend",placeholder:"请求协议"},slot:"prepend",model:{value:e.dcRequestAPI.reqtype,callback:function(t){e.$set(e.dcRequestAPI,"reqtype",t)},expression:"dcRequestAPI.reqtype"}},[r("el-option",{attrs:{label:"GET",value:"GET"}}),r("el-option",{attrs:{label:"POST",value:"POST"}})],1),r("el-button",{attrs:{slot:"append",icon:"el-icon-position"},on:{click:e.send},slot:"append"},[e._v(" 发送 ")])],1)],1)],1),r("el-col",[r("el-form-item",{attrs:{label:"contentType:",prop:"contenttype"}},[r("el-radio",{attrs:{label:"application/soap+xml;charset=utf-8"},on:{change:e.changeContentType},model:{value:e.dcRequestAPI.contenttype,callback:function(t){e.$set(e.dcRequestAPI,"contenttype",t)},expression:"dcRequestAPI.contenttype"}},[e._v(" application/soap+xml;charset=utf-8 ")]),r("el-radio",{attrs:{label:"application/x-www-form-urlencoded;charset=UTF-8"},on:{change:e.changeContentType},model:{value:e.dcRequestAPI.contenttype,callback:function(t){e.$set(e.dcRequestAPI,"contenttype",t)},expression:"dcRequestAPI.contenttype"}},[e._v(" application/x-www-form-urlencoded;charset=UTF-8 ")]),r("el-radio",{attrs:{label:"text/xml;charset=UTF-8"},on:{change:e.changeContentType},model:{value:e.dcRequestAPI.contenttype,callback:function(t){e.$set(e.dcRequestAPI,"contenttype",t)},expression:"dcRequestAPI.contenttype"}},[e._v(" text/xml;charset=UTF-8 ")]),r("el-radio",{attrs:{label:"2"},model:{value:e.contenttypeCustom,callback:function(t){e.contenttypeCustom=t},expression:"contenttypeCustom"}},[e._v(" 自定义 ")]),e.custom?r("el-input",{model:{value:e.dcRequestAPI.contenttype,callback:function(t){e.$set(e.dcRequestAPI,"contenttype",t)},expression:"dcRequestAPI.contenttype"}}):e._e()],1)],1),r("el-col",[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"协议类型:",prop:"agreetype"}},[r("el-radio",{attrs:{label:"1"},model:{value:e.dcRequestAPI.agreetype,callback:function(t){e.$set(e.dcRequestAPI,"agreetype",t)},expression:"dcRequestAPI.agreetype"}},[e._v(" xml ")]),r("el-radio",{attrs:{label:"2"},model:{value:e.dcRequestAPI.agreetype,callback:function(t){e.$set(e.dcRequestAPI,"agreetype",t)},expression:"dcRequestAPI.agreetype"}},[e._v(" json ")])],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"调度规则:",prop:"rule_id"}},[r("el-select",{model:{value:e.dcRequestAPI.rule_id,callback:function(t){e.$set(e.dcRequestAPI,"rule_id",t)},expression:"dcRequestAPI.rule_id"}},e._l(e.rwList,(function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"soap-action:",prop:"soapaction"}},[r("el-input",{model:{value:e.dcRequestAPI.soapaction,callback:function(t){e.$set(e.dcRequestAPI,"soapaction",t)},expression:"dcRequestAPI.soapaction"}})],1)],1)],1),r("el-col",[r("el-form-item",{attrs:{label:"请求体"}},[r("el-col",{attrs:{span:12}},[r("el-input",{attrs:{type:"textarea",rows:23},model:{value:e.dcRequestAPI.reqbody,callback:function(t){e.$set(e.dcRequestAPI,"reqbody",t)},expression:"dcRequestAPI.reqbody"}})],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"生成表名",prop:"tag"}},[r("el-input",{model:{value:e.dcRequestAPI.tag,callback:function(t){e.$set(e.dcRequestAPI,"tag",t)},expression:"dcRequestAPI.tag"}})],1),r("el-form-item",{attrs:{label:"参数类型"}},[r("el-radio-group",{model:{value:e.dcRequestAPI.isparam,callback:function(t){e.$set(e.dcRequestAPI,"isparam",t)},expression:"dcRequestAPI.isparam"}},[r("el-radio",{attrs:{label:3}},[e._v("无参")]),r("el-radio",{attrs:{label:1}},[e._v("时间范围")]),r("el-radio",{attrs:{label:2}},[e._v("单个参数")])],1)],1),2==e.dcRequestAPI.isparam?r("el-col",[r("el-form-item",{attrs:{label:"入参节点"}},[r("el-input",{model:{value:e.dcRequestAPI.single_node_name,callback:function(t){e.$set(e.dcRequestAPI,"single_node_name",t)},expression:"dcRequestAPI.single_node_name"}})],1),r("el-form-item",{attrs:{label:"入参值"}},[r("el-input",{model:{value:e.dcRequestAPI.single_node_value,callback:function(t){e.$set(e.dcRequestAPI,"single_node_value",t)},expression:"dcRequestAPI.single_node_value"}})],1),r("el-form-item",{attrs:{label:"父接口名称:"}},[r("el-select",{model:{value:e.dcRequestAPI.web_id,callback:function(t){e.$set(e.dcRequestAPI,"web_id",t)},expression:"dcRequestAPI.web_id"}},e._l(e.webList,(function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1),r("el-form-item",{attrs:{label:"父接口入参节点"}},[r("el-input",{model:{value:e.dcRequestAPI.web_node,callback:function(t){e.$set(e.dcRequestAPI,"web_node",t)},expression:"dcRequestAPI.web_node"}})],1)],1):e._e(),1==e.dcRequestAPI.isparam?r("el-col",[r("el-form-item",{attrs:{label:"时间类型"}},[r("el-select",{model:{value:e.dcRequestAPI.time_length,callback:function(t){e.$set(e.dcRequestAPI,"time_length",t)},expression:"dcRequestAPI.time_length"}},e._l(e.dateType,(function(e,t){return r("el-option",{key:t,attrs:{value:e.value,label:e.label}})})),1)],1),r("el-form-item",{attrs:{label:"开始时间节点"}},[r("el-input",{model:{value:e.dcRequestAPI.start_node_name,callback:function(t){e.$set(e.dcRequestAPI,"start_node_name",t)},expression:"dcRequestAPI.start_node_name"}})],1),r("el-form-item",{attrs:{label:"开始时间"}},[r("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:19!=e.dcRequestAPI.time_length,expression:"dcRequestAPI.time_length != 19"}],attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.dcRequestAPI.start_node_value,callback:function(t){e.$set(e.dcRequestAPI,"start_node_value",t)},expression:"dcRequestAPI.start_node_value"}}),r("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:19==e.dcRequestAPI.time_length,expression:"dcRequestAPI.time_length == 19"}],attrs:{type:"datetime",placeholder:"选择日期","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.dcRequestAPI.start_node_value,callback:function(t){e.$set(e.dcRequestAPI,"start_node_value",t)},expression:"dcRequestAPI.start_node_value"}})],1),r("el-form-item",{attrs:{label:"结束时间节点"}},[r("el-input",{model:{value:e.dcRequestAPI.end_node_name,callback:function(t){e.$set(e.dcRequestAPI,"end_node_name",t)},expression:"dcRequestAPI.end_node_name"}})],1),r("el-form-item",{attrs:{label:"结束时间"}},[r("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:19==e.dcRequestAPI.time_length,expression:"dcRequestAPI.time_length == 19"}],attrs:{type:"datetime",placeholder:"选择日期","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.dcRequestAPI.end_node_value,callback:function(t){e.$set(e.dcRequestAPI,"end_node_value",t)},expression:"dcRequestAPI.end_node_value"}}),r("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:19!=e.dcRequestAPI.time_length,expression:"dcRequestAPI.time_length != 19"}],attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.dcRequestAPI.end_node_value,callback:function(t){e.$set(e.dcRequestAPI,"end_node_value",t)},expression:"dcRequestAPI.end_node_value"}})],1),r("el-form-item",{attrs:{label:"抽取范围"}},[r("el-input-number",{attrs:{min:0},model:{value:e.dcRequestAPI.scope,callback:function(t){e.$set(e.dcRequestAPI,"scope",t)},expression:"dcRequestAPI.scope"}})],1)],1):e._e(),r("el-col",{directives:[{name:"show",rawName:"v-show",value:2!=e.dcRequestAPI.agreetype,expression:"dcRequestAPI.agreetype != 2"}]},[r("el-form-item",{attrs:{label:"命名空间"}},[r("el-input",{model:{value:e.dcRequestAPI.name_space,callback:function(t){e.$set(e.dcRequestAPI,"name_space",t)},expression:"dcRequestAPI.name_space"}})],1),r("el-form-item",{attrs:{label:"命名地址"}},[r("el-input",{model:{value:e.dcRequestAPI.name_space_url,callback:function(t){e.$set(e.dcRequestAPI,"name_space_url",t)},expression:"dcRequestAPI.name_space_url"}})],1)],1)],1)],1)],1)],1),r("el-row",[r("el-col",[r("el-form-item",{attrs:{label:"请求结果:"}},[r("el-tabs",{model:{value:e.activeJg,callback:function(t){e.activeJg=t},expression:"activeJg"}},[r("el-tab-pane",{attrs:{label:"响应体",name:"first"}},[r("el-col",{attrs:{span:12}},[r("el-input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:6},readonly:!0},model:{value:e.dcRequestAPI.respbody,callback:function(t){e.$set(e.dcRequestAPI,"respbody",t)},expression:"dcRequestAPI.respbody"}})],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==e.dcRequestAPI.isparam,expression:"dcRequestAPI.isparam == 1"}],attrs:{label:"时间字段"}},[r("el-input",{attrs:{placeholder:"对应库表中的抽取时间字段"},model:{value:e.dcRequestAPI.tag_time,callback:function(t){e.$set(e.dcRequestAPI,"tag_time",t)},expression:"dcRequestAPI.tag_time"}})],1),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==e.dcRequestAPI.isparam,expression:"dcRequestAPI.isparam == 1"}],attrs:{label:"去空字段"}},[r("el-input",{attrs:{placeholder:"非必填项，删除出院时间为空数据"},model:{value:e.dcRequestAPI.tag_null,callback:function(t){e.$set(e.dcRequestAPI,"tag_null",t)},expression:"dcRequestAPI.tag_null"}})],1),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2==e.dcRequestAPI.isparam,expression:"dcRequestAPI.isparam == 2"}],attrs:{label:"单参字段"}},[r("el-input",{attrs:{placeholder:"对应库表中的病历号主键"},model:{value:e.dcRequestAPI.tag_blh,callback:function(t){e.$set(e.dcRequestAPI,"tag_blh",t)},expression:"dcRequestAPI.tag_blh"}})],1),r("el-form-item",{attrs:{label:"解析节点",prop:"analysis_node"}},[r("el-input",{model:{value:e.dcRequestAPI.analysis_node,callback:function(t){e.$set(e.dcRequestAPI,"analysis_node",t)},expression:"dcRequestAPI.analysis_node"}})],1),r("el-form-item",{attrs:{label:"是否规范",prop:"is_standard"}},[r("el-radio-group",{model:{value:e.dcRequestAPI.is_standard,callback:function(t){e.$set(e.dcRequestAPI,"is_standard",t)},expression:"dcRequestAPI.is_standard"}},[r("el-radio",{attrs:{label:1}},[e._v("是")]),r("el-radio",{attrs:{label:-1}},[e._v("否")])],1)],1),r("el-form-item",{attrs:{label:"是否多层XML",prop:"is_multiwall"}},[r("el-radio-group",{model:{value:e.dcRequestAPI.is_multiwall,callback:function(t){e.$set(e.dcRequestAPI,"is_multiwall",t)},expression:"dcRequestAPI.is_multiwall"}},[r("el-radio",{attrs:{label:1}},[e._v("是")]),r("el-radio",{attrs:{label:-1}},[e._v("否")])],1)],1)],1)],1),r("el-tab-pane",{attrs:{label:"响应头",name:"second"}},[r("el-input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:6},disabled:!0},model:{value:e.dcRequestAPI.respheader,callback:function(t){e.$set(e.dcRequestAPI,"respheader",t)},expression:"dcRequestAPI.respheader"}})],1),r("el-tab-pane",{attrs:{label:"Cookie",name:"third"}},[r("el-input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:6},disabled:!0},model:{value:e.dcRequestAPI.cookie,callback:function(t){e.$set(e.dcRequestAPI,"cookie",t)},expression:"dcRequestAPI.cookie"}})],1)],1)],1)],1)],1)],1)],1),r("div",{staticClass:"demo-drawer__footer"},[r("el-button",{on:{click:function(t){return e.validForm("analysis")}}},[e._v("解 析")]),r("el-button",{on:{click:e.cancel}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.validForm("save")}}},[e._v(" "+e._s(e.loading?"提交中 ...":"确 定")+" ")])],1)])])],1)},n=[],i=(r("4798"),r("6a61"),r("2e91")),s=r("28f8"),o=r("b1f5"),l=r("654d"),c={name:"Webservice",props:{dialogvisible:{type:Boolean},id:{type:Number||String,default:null},productid:{type:Number||String,default:null},hospitalid:{type:Number||String,default:null},data:{type:Object,default:function(){return{web_id:"",reqtype:"",agreetype:"",contenttype:"",isparam:0,tag:"",id:"",name:"",url:"",headers:"",params:"",respbody:"",respheader:"",cookie:"",job_id:"",schedule_id:"",type:"",type_id:"",product_id:"",time_length:"",soapaction:"",tag_null:""}}}},data:function(){var e;return{dateType:[{label:"年-月-日",value:"10"},{label:"年-月-日 时:分:秒",value:"19"}],contenttypeCustom:"",activeName:"first",activeJg:"first",custom:!1,plCs:!0,plQqt:!0,dcRequestAPI:(e={tag_blh:"",tag_time:"",time_length:"",name_space:"",name_space_url:"",schedule_id:"",rule_id:"",scope:"",is_standard:1,analysis_node:"",single_node_name:"",single_node_value:"",web_node:"",web_id:"",start_node_name:"",start_node_value:"",end_node_name:"",end_node_value:"",reqtype:"POST",agreetype:"1",contenttype:"text/xml;charset=UTF-8",isparam:3,tag:"",id:"",name:"",url:"",headers:"",params:"",respbody:"",respheader:"",cookie:"",job_id:this.id},Object(s["a"])(e,"schedule_id",""),Object(s["a"])(e,"type",""),Object(s["a"])(e,"type_id",""),Object(s["a"])(e,"soapaction",""),Object(s["a"])(e,"tag_null",""),Object(s["a"])(e,"product_id",this.productid),Object(s["a"])(e,"hospital_id",this.hospitalid),Object(s["a"])(e,"is_multiwall",""),e),rules:{rule_id:[{required:!0,message:"请选择调度规则",trigger:"blur"}],name:[{required:!0,message:"请输入接口名称",trigger:"blur"}],url:[{required:!0,message:"请输入请求路径",trigger:"blur"}],is_standard:[{required:!0,message:"请选择xml是否规范",trigger:"blur"}],analysis_node:[{required:!0,message:"请输入解析节点",trigger:"blur"}]},rwList:[],headers:[{key:"",value:""}],params:[{key:"",value:""}],webList:[],dialog:!0,loading:!1}},watch:{contenttypeCustom:function(e){e?(this.custom=!0,this.dcRequestAPI.contenttype=""):this.custom=!1},"dcRequestAPI.isparam":function(e){this.params=1==e?[{key:"",value:""},{key:"",value:""}]:[{key:"",value:""}]},data:{handler:function(e){this.dcRequestAPI=JSON.parse(JSON.stringify(e))}},id:function(e){this.dcRequestAPI.job_id=e},productid:function(e){this.dcRequestAPI.product_id=e},hospitalid:function(e){this.dcRequestAPI.hospital_id=e}},created:function(){this.fetchData(),this.getWeb(),this.dcRequestAPI=this.data,this.dcRequestAPI.job_id=this.id,this.dcRequestAPI.product_id=this.productid,this.dcRequestAPI.hospital_id=this.hospitalid},methods:{closed:function(){this.$emit("closed",!1)},cancel:function(){this.$emit("dialogvisible-value",!1)},handleClose:function(){var e=this;this.$confirm("确认关闭？").then((function(t){e.$emit("dialogvisible-value",!1)})).catch((function(e){}))},fetchData:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["getAllCorn"])();case 2:r=t.sent,a=r.t,e.rwList=a;case 5:case"end":return t.stop()}}),t)})))()},getWeb:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["getAll"])();case 2:r=t.sent,a=r.t,e.webList=a.list;case 5:case"end":return t.stop()}}),t)})))()},validForm:function(e){var t=this;this.$refs["dcRequestAPI"].validate((function(r){if(!r)return!1;"send"==e?t.send():"save"==e?t.save():"analysis"==e&&t.analysis()}))},send:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(r="",a=0;a<e.params.length;a++)e.params[a].key&&(r+=e.params[a].key+":"+e.params[a].value+";");return e.dcRequestAPI.params=r,t.next=5,Object(o["sendout"])(e.dcRequestAPI);case 5:n=t.sent,i=n.t,e.dcRequestAPI=i;case 8:case"end":return t.stop()}}),t)})))()},save:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a,n,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(r="",a=0;a<e.params.length;a++)e.params[a].key&&(r+=e.params[a].key+":"+e.params[a].value+";");return e.dcRequestAPI.params=r,t.next=5,Object(o["save"])(e.dcRequestAPI);case 5:n=t.sent,n.t,i=n.state,s=n.msg,e.$emit("dialogvisible-value",!1),e.$emit("get-data"),e.$message({type:i,message:s}),e.$refs.drawer.closeDrawer();case 13:case"end":return t.stop()}}),t)})))()},analysis:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["test"])(e.dcRequestAPI);case 2:r=t.sent,r.t,a=r.state,n=r.msg,e.$message({type:a,message:n});case 7:case"end":return t.stop()}}),t)})))()},changeContentType:function(){this.contenttypeCustom=""}}},u=c,d=(r("896c"),r("c701")),m=Object(d["a"])(u,a,n,!1,null,null,null);t["default"]=m.exports},"51d6":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"transfer-container"},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[r("el-table-column",{attrs:{prop:"name",label:"存储名称",width:"200"}}),r("el-table-column",{attrs:{prop:"name_zh",label:"存储中文",width:"200"}}),r("el-table-column",{attrs:{prop:"table_mian_name",label:"表名",width:"120"}}),r("el-table-column",{attrs:{prop:"table_mian_name_zh",label:"表中文名",width:"120"}}),r("el-table-column",{attrs:{prop:"isparam",label:"参数",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(1==t.row.isparam?"时间参数":"无")+" ")]}}])}),r("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){return e.doEdit(t.row)}}},[e._v(" 修改 ")]),r("el-button",{attrs:{slot:"reference",type:"text"},on:{click:function(r){return e.cqsj(t.row)}},slot:"reference"},[e._v(" 抽取数据 ")])]}}])})],1),r("el-pagination",{attrs:{"current-page":e.page.pageNum,"page-size":e.page.pageSize,layout:"total, prev, pager, next",total:e.page.total},on:{"update:currentPage":function(t){return e.$set(e.page,"pageNum",t)},"update:current-page":function(t){return e.$set(e.page,"pageNum",t)},"current-change":e.handleCurrentChange}}),r("el-dialog",{attrs:{title:"提示",visible:e.visible,width:"30%","before-close":e.handleClose,"append-to-body":!0},on:{"update:visible":function(t){e.visible=t}}},[r("el-form",{ref:"timeForm",attrs:{model:e.timeForm,rules:e.rules}},[r("el-form-item",{attrs:{label:"开始时间",prop:"stime"}},[r("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:!e.len,expression:"!len"}],attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.timeForm.stime,callback:function(t){e.$set(e.timeForm,"stime",t)},expression:"timeForm.stime"}}),r("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:e.len,expression:"len"}],attrs:{type:"datetime",placeholder:"选择日期","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.timeForm.stime,callback:function(t){e.$set(e.timeForm,"stime",t)},expression:"timeForm.stime"}})],1),r("el-form-item",{attrs:{label:"结束时间",prop:"etime"}},[r("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:!e.len,expression:"!len"}],attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.timeForm.etime,callback:function(t){e.$set(e.timeForm,"etime",t)},expression:"timeForm.etime"}}),r("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:e.len,expression:"len"}],attrs:{type:"datetime",placeholder:"选择日期","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.timeForm.etime,callback:function(t){e.$set(e.timeForm,"etime",t)},expression:"timeForm.etime"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.cq()}}},[e._v("确 定")])],1)],1),r("DllStorageAdd",{attrs:{dllvisible:e.dllvisible,"form-data":e.form,jobid:e.id,str:e.str,productid:e.productid,hospitalid:e.hospitalid},on:{translate:e.translate,dllvisibleValue:e.dllvisibleValue}})],1)},n=[],i=(r("4798"),r("6a61"),r("2e91")),s=r("77cb"),o=r("d434"),l=r("283b"),c=r("cf80"),u={name:"DllStorage",components:{DllStorageAdd:s["default"]},props:{id:{type:Number,default:null},productid:{type:Number,default:null},hospitalid:{type:Number,default:null},isDrawerDirect:{type:Boolean,default:!1}},data:function(){return{page:{pageSize:8,pageNum:1,total:0},str:"edit",row:{},tableData:[],dllvisible:!1,len:!1,form:"",visible:!1,timeForm:{stime:"",etime:""},dbTypeList:[],serForm:{name:"",formType:""},rules:{stime:[{required:!0,message:"请输入开始时间",trigger:"blur"}],etime:[{required:!0,message:"请输入结束时间",trigger:"blur"}]}}},watch:{id:function(e){this.fetchData()},productid:function(e){},hospitalid:function(e){}},created:function(){this.fetchData(),this.getdbTypeList(),this.tableData=[]},mounted:function(){this.tableData=[]},methods:{resetForm:function(e){this.$refs[e].resetFields()},handleCurrentChange:function(e){this.page.pageNum=e,this.fetchData()},fetchData:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.parse(JSON.stringify(e.page)),delete r["total"],t.next=4,Object(c["dcProcedure"])(_.assign(r,{transfer_id:e.id}));case 4:a=t.sent,n=a.t,e.tableData=n.list,e.page.pageNum=n.pageNum,e.page.total=n.total;case 9:case"end":return t.stop()}}),t)})))()},doEdit:function(e){this.dllvisible=!0,this.form=JSON.parse(JSON.stringify(e))},cq:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.visible=!1,e.$refs["timeForm"].validate((function(t){if(!t)return!1;var r=JSON.parse(JSON.stringify(e.row));r["stime"]=e.timeForm.stime,r["etime"]=e.timeForm.etime,e.sjcq(r)}));case 2:case"end":return t.stop()}}),t)})))()},cqsj:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:e.tiem_length&&e.tiem_length>10?t.len=!0:t.len=!1,t.row=JSON.parse(JSON.stringify(e)),3==e.isparam?(t.visible=!1,t.sjcq()):t.visible=!0;case 3:case"end":return r.stop()}}),r)})))()},sjcq:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a,n,i,s,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=e||t.row,n=t.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),r.next=4,Object(o["getExtract"])(a);case 4:i=r.sent,s=i.msg,i.t,l=i.state,""!=s&&n.close(),t.$message({message:s,type:l});case 10:case"end":return r.stop()}}),r)})))()},doDel:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a,n,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(l["delTransfer"])(e);case 2:a=r.sent,a.t,n=a.msg,i=a.state,t.$message({message:n,type:i}),t.fetchData();case 8:case"end":return r.stop()}}),r)})))()},dllvisibleValue:function(e){this.dllvisible=e},translate:function(){this.fetchData()},getdbTypeList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,getTransferDbtype();case 2:r=t.sent,a=r.t,e.dbTypeList=a.list;case 5:case"end":return t.stop()}}),t)})))()},reset:function(){this.resetForm("serForm"),this.fetchData()}}},d=u,m=r("c701"),p=Object(m["a"])(d,a,n,!1,null,null,null);t["default"]=p.exports},"5c5d":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"webInterface-container"},[r("el-form",{ref:"ser_form",attrs:{model:e.ser_form,"label-width":"80px"}},[r("el-row",[r("el-col",{attrs:{lg:6}},[r("el-form-item",{attrs:{label:"接口名称",prop:"name"}},[r("el-input",{model:{value:e.ser_form.name,callback:function(t){e.$set(e.ser_form,"name",t)},expression:"ser_form.name"}})],1)],1),r("el-col",{staticStyle:{"text-align":"center"},attrs:{lg:8}},[r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.fetchData}},[e._v("查询")]),r("el-button",{on:{click:function(t){return e.resetForm("ser_form")}}},[e._v(" 重置 ")]),r("el-button",{on:{click:e.addWebInterFace}},[e._v("新增")])],1)],1)],1)],1),e.dialogvisible?r("Webservice",{attrs:{id:e.web.id,data:e.webData,hospitalid:e.web.hospitalid,productid:e.web.productid,dialogvisible:e.dialogvisible},on:{dialogvisibleValue:e.dialogvisibleValue,getData:e.fetchData,closed:function(t){e.dialogvisible=t}}}):e._e(),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[r("el-table-column",{attrs:{prop:"name",label:"接口名称",width:"200"}}),r("el-table-column",{attrs:{prop:"tag",label:"表名称",width:"200"}}),r("el-table-column",{attrs:{prop:"isparam",label:"是否有参",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("isparamFilter")(t.row.isparam))+" ")]}}])}),r("el-table-column",{attrs:{prop:"webName",label:"父接口",width:"120"}}),r("el-table-column",{attrs:{label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){return e.handleEdit(t.row)}}},[e._v(" 修改 ")]),r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){return e.handleDel(t.row)}}},[e._v(" 删除 ")]),r("el-button",{directives:[{name:"show",rawName:"v-show",value:2!=t.row.isparam,expression:"scope.row.isparam != 2"}],attrs:{type:"text",size:"small"},on:{click:function(r){return e.cqsj(t.row)}}},[e._v(" 抽取数据 ")]),r("el-dialog",{attrs:{modal:!1,"append-to-body":!0,title:"提示",visible:e.timeVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.timeVisible=t}}},[r("el-form",{ref:"timeform",attrs:{rules:e.timerules,model:e.timeForm}},[r("el-form-item",{attrs:{label:"开始时间:",prop:"sdate"}},[r("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:!e.len,expression:"!len"}],attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.timeForm.sdate,callback:function(t){e.$set(e.timeForm,"sdate",t)},expression:"timeForm.sdate"}}),r("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:e.len,expression:"len"}],attrs:{type:"datetime",placeholder:"选择日期","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.timeForm.sdate,callback:function(t){e.$set(e.timeForm,"sdate",t)},expression:"timeForm.sdate"}})],1),r("el-form-item",{attrs:{label:"结束时间:",prop:"edate"}},[r("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:!e.len,expression:"!len"}],attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.timeForm.edate,callback:function(t){e.$set(e.timeForm,"edate",t)},expression:"timeForm.edate"}}),r("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:e.len,expression:"len"}],attrs:{type:"datetime",placeholder:"选择日期","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.timeForm.edate,callback:function(t){e.$set(e.timeForm,"edate",t)},expression:"timeForm.edate"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.timeVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.save("")}}},[e._v(" 确 定 ")])],1)],1)]}}])})],1),r("el-pagination",{attrs:{"current-page":e.pageInfo.pageNum,"page-size":e.pageInfo.pageSize,layout:"total, prev, pager, next",total:e.total},on:{"update:currentPage":function(t){return e.$set(e.pageInfo,"pageNum",t)},"update:current-page":function(t){return e.$set(e.pageInfo,"pageNum",t)},"current-change":e.handleCurrentChange}})],1)},n=[],i=(r("4798"),r("28f8")),s=(r("6a61"),r("2e91")),o=r("4278"),l=r("b1f5"),c=(r("dc53"),r("cf80")),u={components:{Webservice:o["default"]},filters:{isparamFilter:function(e){return 3==e?"无参":1==e?"时间参数":2==e?"单个参数":void 0}},props:{id:{type:Number||String,default:null},productid:{type:Number||String,default:null},hospitalid:{type:Number||String,default:null}},data:function(){return{pageInfo:{pageSize:3,pageNum:1},len:!1,cornData:[],currentRow:null,cornVisible:!1,total:0,visible:!1,timeVisible:!1,webData:{},dialogvisible:!1,ser_form:{name:""},tableData:[],row:"",web:{id:"",productid:"",hospitalid:""},timeForm:{sdate:"",edate:""},timerules:{sdate:[{required:!0,message:"请输入开始时间",trigger:"blur"}],edate:[{required:!0,message:"请输入结束时间",trigger:"blur"}]}}},watch:{id:function(e){this.web.id=e},productid:function(e){this.web.productid=e},hospitalid:function(e){this.web.hospitalid=e}},created:function(){this.fetchData(),this.web.id=this.id,this.web.productid=this.productid,this.web.hospitalid=this.hospitalid},methods:{resetForm:function(e){this.$refs[e].resetFields(),this.fetchData()},dialogvisibleValue:function(e){this.dialogvisible=e},handleClose:function(e){this.$confirm("确认关闭？").then((function(t){e()})).catch((function(e){}))},fetchData:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.parse(JSON.stringify(e.pageInfo)),t.next=3,Object(c["findByJobId"])(_.assign(r,e.ser_form,{job_id:e.id}));case 3:a=t.sent,n=a.t,e.tableData=n.list,e.total=n.total,e.pageInfo.pageNum=n.pageNum;case 8:case"end":return t.stop()}}),t)})))()},handleEdit:function(e){this.webData=e,this.dialogvisible=!0},handleCurrentChange:function(e){this.pageInfo.pageNum=e,this.fetchData()},handleCurrentRowChange:function(e){this.currentRow=e,this.cornVisible=!1},bdgz:function(e){this.cornVisible=!0},handleDel:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var a,n,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(l["doDel"])({id:e.id});case 2:a=r.sent,a.t,n=a.msg,i=a.state,t.$message({message:n,type:i}),t.fetchData();case 8:case"end":return r.stop()}}),r)})))()},cqsj:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var a,n,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e.tiem_length&&e.tiem_length>10?t.len=!0:t.len=!1,1!=e.isparam){r.next=5;break}return t.timeVisible=!0,t.row=e,r.abrupt("return");case 5:return r.next=7,Object(l["saveOneTable"])(e);case 7:a=r.sent,a.t,n=a.state,i=a.msg,t.$message({type:n,message:i});case 12:case"end":return r.stop()}}),r)})))()},save:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.$refs["timeform"].validate((function(r){if(!r)return!1;t.saveTime(e)}));case 1:case"end":return r.stop()}}),r)})))()},saveTime:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var a,n,i,s,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=""==e?JSON.parse(JSON.stringify(t.row)):JSON.parse(JSON.stringify(e)),a["startTime"]=t.timeForm.sdate,a["endTime"]=t.timeForm.edate,t.timeVisible=!1,n=t.$loading({lock:!0,text:"抽取中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),r.next=7,Object(l["saveOneTable"])(a);case 7:i=r.sent,i.t,s=i.state,o=i.msg,n.close(),t.$message({type:s,message:o});case 13:case"end":return r.stop()}}),r)})))()},addWebInterFace:function(){var e;this.webData=(e={time_length:"",name_space:"",name_space_url:"",schedule_id:"",rule_id:"",scope:"",is_standard:1,analysis_node:"",single_node_name:"",single_node_value:"",web_node:"",web_id:"",start_node_name:"",start_node_value:"",end_node_name:"",end_node_value:"",reqtype:"POST",agreetype:"1",contenttype:"text/xml;charset=UTF-8",isparam:3,tag:"",id:"",name:"",url:"",headers:"",params:"",respbody:"",respheader:"",cookie:"",job_id:this.id},Object(i["a"])(e,"schedule_id",""),Object(i["a"])(e,"type",""),Object(i["a"])(e,"type_id",""),Object(i["a"])(e,"product_id",this.productid),Object(i["a"])(e,"hospital_id",this.hospitalid),e),this.dialogvisible=!0}}},d=u,m=(r("84b1"),r("c701")),p=Object(m["a"])(d,a,n,!1,null,"1e0f2180",null);t["default"]=p.exports},"654d":function(e,t,r){"use strict";r.r(t),r.d(t,"getAllCorn",(function(){return n}));var a=r("b775");function n(){return Object(a["default"])({url:"/scheduleRule/findAll",method:"get"})}},"6e1b":function(e,t,r){"use strict";r.r(t),r.d(t,"selectAll",(function(){return n})),r.d(t,"findJobByName",(function(){return i})),r.d(t,"insertJob",(function(){return s})),r.d(t,"updateJob",(function(){return o})),r.d(t,"deleteJob",(function(){return l}));var a=r("b775");function n(){return Object(a["default"])({url:"/dcjob/findJobAll",method:"get"})}function i(e){return Object(a["default"])({url:"/dcjob/findJobByName",method:"get",params:e})}function s(e){return Object(a["default"])({url:"/dcjob/insertJob",method:"post",data:e})}function o(e){return Object(a["default"])({url:"/dcjob/updateJob",method:"put",data:e})}function l(e){return Object(a["default"])({url:"/dcjob/deleteJob",method:"delete",data:e})}},"77cb":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"direct-container"},[r("el-dialog",{attrs:{title:"数据抽取",visible:e.dllvisible,"append-to-body":!0,width:"28%","before-close":e.handleClose},on:{"update:visible":function(t){e.dllvisible=t}}},[r("el-form",{ref:"form",attrs:{"label-width":"100px",rules:e.rules,model:e.form}},[r("el-form-item",{attrs:{label:"抽取表名",prop:"table_mian_name"}},[r("el-input",{on:{change:e.changeName},model:{value:e.form.table_mian_name,callback:function(t){e.$set(e.form,"table_mian_name",t)},expression:"form.table_mian_name"}})],1),r("el-form-item",{attrs:{label:"表中文名",prop:"table_mian_name_zh"}},[r("el-input",{on:{change:e.changeNameZh},model:{value:e.form.table_mian_name_zh,callback:function(t){e.$set(e.form,"table_mian_name_zh",t)},expression:"form.table_mian_name_zh"}})],1),r("el-form-item",{attrs:{label:"存储名称",prop:"name"}},[r("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),r("el-form-item",{attrs:{label:"存储中文名",prop:"name_zh"}},[r("el-input",{attrs:{readonly:""},model:{value:e.form.name_zh,callback:function(t){e.$set(e.form,"name_zh",t)},expression:"form.name_zh"}})],1),r("el-form-item",{attrs:{label:"是否有参",prop:"isparam"}},[r("el-radio-group",{model:{value:e.form.isparam,callback:function(t){e.$set(e.form,"isparam",t)},expression:"form.isparam"}},[r("el-radio",{attrs:{label:3}},[e._v("无")]),r("el-radio",{attrs:{label:1}},[e._v("有")])],1)],1),r("el-form-item",{attrs:{label:"调度规则",prop:"rule_id"}},[r("el-select",{model:{value:e.form.rule_id,callback:function(t){e.$set(e.form,"rule_id",t)},expression:"form.rule_id"}},e._l(e.cornList,(function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==e.form.isparam,expression:"form.isparam == 1"}],attrs:{label:"抽取范围",prop:"scope"}},[r("el-input-number",{attrs:{min:0},model:{value:e.form.scope,callback:function(t){e.$set(e.form,"scope",t)},expression:"form.scope"}})],1),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==e.form.isparam,expression:"form.isparam == 1"}],attrs:{label:"时间字段",prop:"time_column_name"}},[r("el-input",{model:{value:e.form.time_column_name,callback:function(t){e.$set(e.form,"time_column_name",t)},expression:"form.time_column_name"}})],1),1==e.form.isparam?r("el-form-item",{attrs:{label:"时间长度",prop:"tiem_length"}},[r("el-select",{model:{value:e.form.tiem_length,callback:function(t){e.$set(e.form,"tiem_length",t)},expression:"form.tiem_length"}},[r("el-option",{attrs:{value:10,label:"年-月-日"}}),r("el-option",{attrs:{value:19,label:"年-月-日 时:分:秒"}})],1)],1):e._e(),r("el-form-item",{attrs:{label:"SQL",prop:"content"}},[r("el-input",{attrs:{type:"textarea",autosize:{minRows:10,maxRows:10},readonly:"true",placeholder:"保存前请先测试！！！"},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.cancel}},[e._v("取 消")]),r("el-button",{on:{click:e.test}},[e._v("测 试")]),r("el-button",{attrs:{type:"primary"},on:{click:e.toSave}},[e._v("保 存")])],1)],1)],1)},n=[],i=(r("5c4c"),r("4798"),r("6a61"),r("2e91")),s=r("28f8"),o=r("d434"),l=r("654d"),c={name:"Direct",props:{dllvisible:{type:Boolean},id:{type:Number||String,default:null},str:{type:String,default:"add"},transferId:{type:Number||String,default:null},hospitalid:{type:Number||String,default:null},productid:{type:Number||String,default:null},formData:{type:Object,default:function(){return{table_mian_name:"",table_mian_name_zh:"",name:"",name_zh:"",isparam:0,time_column_name:"",content:"",id:"",tiem_length:"",transfer_id:"",hospital_id:this.hospitalid,product_id:this.productid}}}},data:function(){var e;return{form:(e={table_mian_name:"",table_mian_name_zh:"",name:"",name_zh:"",isparam:0,time_column_name:"",content:"",id:"",transfer_id:this.transferId},Object(s["a"])(e,"time_column_name",""),Object(s["a"])(e,"scope",0),Object(s["a"])(e,"rule_id",""),Object(s["a"])(e,"hospital_id",this.hospitalid),Object(s["a"])(e,"product_id",this.productid),Object(s["a"])(e,"tiem_length",""),Object(s["a"])(e,"job_id",""),e),cornList:[],dbTypeList:[],rules:{table_mian_name:[{required:!0,message:"请输入抽取表名",trigger:"blur"}],table_mian_name_zh:[{required:!0,message:"请输入表中文名",trigger:"blur"}],isparam:[{required:!0,message:"请选择是否有参",trigger:"blur"}],time_column_name:[{required:!1,message:"请输入字段",trigger:"blur"}],content:[{required:!0,message:"请先测试后保存！",trigger:"blur"}]}}},watch:{formData:function(e,t){this.form=JSON.parse(JSON.stringify(e))},transferId:function(e){this.form.transfer_id=e},hospitalid:function(e){this.form.hospital_id=e},productid:function(e){this.form.product_id=e},jobid:function(e){this.form.job_id=e}},created:function(){this.getCornList()},mounted:function(){},methods:{cancel:function(){this.$emit("dllvisibleValue",!1)},handleClose:function(){var e=this;this.$confirm("确认关闭？").then((function(t){e.$emit("dllvisibleValue",!1)})).catch((function(e){}))},changeName:function(e){this.form.name="ETL_dc_eto_"+e+"_to_"+e},changeNameZh:function(e){this.form.name_zh="远程抽取"+e+"数据到dc库中的"+this.form.table_mian_name+"表"},test:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a,n,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.parse(JSON.stringify(e.form)),r.isparam=String(r.isparam),t.next=4,Object(o["testProc"])(r);case 4:a=t.sent,n=a.t,i=a.state,s=a.msg,e.form.content=n.content,e.$message({message:s,type:i});case 10:case"end":return t.stop()}}),t)})))()},toSave:function(){var e=this;this.$refs["form"].validate((function(t){if(!t)return e.$message({message:"请输入必填项！",type:"error"}),!1;e.save()}))},save:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["saveProc"])(e.form);case 2:r=t.sent,r.t,a=r.state,n=r.msg,e.$message({message:n,type:a}),e.$emit("dllvisibleValue",!1),e.$emit("translate");case 9:case"end":return t.stop()}}),t)})))()},getCornList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["getAllCorn"])();case 2:r=t.sent,a=r.t,e.cornList=a;case 5:case"end":return t.stop()}}),t)})))()},resetForm:function(){this.$refs["form"].resetFields(),this.form.id=null}}},u=c,d=r("c701"),m=Object(d["a"])(u,a,n,!1,null,null,null);t["default"]=m.exports},"7eda":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"myProject-container"},[r("el-form",{ref:"ser_form",attrs:{model:e.ser_form,"label-width":"80px"}},[r("el-row",[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"医院名称",prop:"hospital"}},[r("el-select",{model:{value:e.ser_form.hospital,callback:function(t){e.$set(e.ser_form,"hospital",t)},expression:"ser_form.hospital"}},e._l(e.hospitalList,(function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1)],1),r("el-col",{directives:[{name:"show",rawName:"v-show",value:e.toggleSearchStatus,expression:"toggleSearchStatus"}],attrs:{span:6}},[r("el-form-item",{attrs:{label:"产品名称",prop:"product"}},[r("el-select",{model:{value:e.ser_form.product,callback:function(t){e.$set(e.ser_form,"product",t)},expression:"ser_form.product"}},e._l(e.productList,(function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1)],1),r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"创建时间",prop:"time"}},[r("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions,"value-format":"yyyy-MM-dd"},model:{value:e.ser_form.time,callback:function(t){e.$set(e.ser_form,"time",t)},expression:"ser_form.time"}})],1)],1),r("el-col",{staticStyle:{"text-align":"center"},attrs:{span:e.toggleSearchStatus?24:8}},[r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.fetchData}},[e._v("查询")]),r("el-button",{on:{click:function(t){return e.resetForm("ser_form")}}},[e._v("重置")]),r("el-button",{on:{click:e.addJob}},[e._v("新建工单")]),r("el-link",{staticStyle:{"margin-left":"0.625rem"},attrs:{type:"primary",icon:e.toggleSearchStatus?"el-icon-arrow-up":"el-icon-arrow-down",underline:!1},on:{click:e.Toggle}},[e._v(" "+e._s(e.toggleSearchStatus?"收起":"展开")+" ")])],1)],1)],1)],1),r("el-drawer",{attrs:{visible:e.isDrawerWeb,title:"web方式",size:"59%",direction:"rtl","custom-class":"drawer"},on:{"update:visible":function(t){e.isDrawerWeb=t}}},[r("div",{staticClass:"drawer-content"},[e.isDrawerWeb?r("WebInterFace",{attrs:{id:e.id,productid:e.productid,hospitalid:e.hospitalid}}):e._e()],1)]),r("el-drawer",{attrs:{title:"直连库",size:"72%",visible:e.isDrawerDirect,direction:"rtl"},on:{"update:visible":function(t){e.isDrawerDirect=t}}},[r("div",{staticClass:"drawer-content"},[r("el-card",{attrs:{shadow:"hover"}},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[e._v("直联库")])]),e.isDrawerDirect?r("Transfer",{attrs:{"job-id":e.id,productid:e.productid,hospitalid:e.hospitalid},on:{"current-change":e.currentChange}}):e._e()],1),r("el-card",{attrs:{shadow:"hover"}},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[e._v("直联库存储")])]),e.rend?r("dllStorage",{ref:"dllStorage",attrs:{id:e.transfer,"is-drawer-direct":e.isDrawerDirect}}):e._e()],1)],1)]),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","highlight-current-row":""},on:{"current-change":e.changeCurrent}},[r("el-table-column",{attrs:{type:"index",width:"50"}}),r("el-table-column",{attrs:{prop:"name",label:"工单名称",width:"200"}}),r("el-table-column",{attrs:{prop:"hospitalName",label:"医院名称",width:"200"}}),r("el-table-column",{attrs:{prop:"productName",label:"产品名称",width:"200"}}),r("el-table-column",{attrs:{prop:"creat_time",label:"创建时间",width:"120"}}),r("el-table-column",{attrs:{prop:"update_time",label:"更新时间",width:"120"}}),r("el-table-column",{attrs:{prop:"userName",label:"负责人",width:"100"}}),r("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{directives:[{name:"show",rawName:"v-show",value:"2"==t.row.status,expression:"scope.row.status == '2'"}],attrs:{type:"text",size:"small"},on:{click:function(r){return e.handleClick(t.row)}}},[e._v(" 查看 ")]),r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){return e.confirm(t.row.id,t.row.product_id,t.row.hospital_id)}}},[e._v(" 直连库 ")]),r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){return e.onCancel(t.row.id,t.row.product_id,t.row.hospital_id)}}},[e._v(" web方式 ")]),r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){return e.doEdit(t.row)}}},[e._v(" 修改 ")])]}}])})],1),r("el-pagination",{attrs:{"current-page":e.pageInfo.pageNum,"page-size":e.pageInfo.pageSize,layout:"total, prev, pager, next",total:e.total},on:{"update:currentPage":function(t){return e.$set(e.pageInfo,"pageNum",t)},"update:current-page":function(t){return e.$set(e.pageInfo,"pageNum",t)},"current-change":e.handleCurrentChange}}),r("el-dialog",{attrs:{title:"编辑",visible:e.visible,width:"30%","before-close":e.handleCloseMyjob},on:{"update:visible":function(t){e.visible=t}}},[r("el-form",{ref:"creatform",attrs:{rules:e.rules,"label-width":"90px",model:e.creatform}},[r("el-form-item",{attrs:{label:"工单名称:",prop:"name"}},[r("el-input",{staticStyle:{width:"200px"},model:{value:e.creatform.name,callback:function(t){e.$set(e.creatform,"name",t)},expression:"creatform.name"}})],1),r("el-form-item",{attrs:{label:"医院名称:",prop:"hospital_id"}},[r("el-select",{model:{value:e.creatform.hospital_id,callback:function(t){e.$set(e.creatform,"hospital_id",t)},expression:"creatform.hospital_id"}},e._l(e.hospitalList,(function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1),r("el-form-item",{attrs:{label:"产品名称:",prop:"product_id"}},[r("el-select",{model:{value:e.creatform.product_id,callback:function(t){e.$set(e.creatform,"product_id",t)},expression:"creatform.product_id"}},e._l(e.productList,(function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1),r("el-form-item",{attrs:{label:"负责人:",prop:"user_id"}},[r("el-select",{model:{value:e.creatform.user_id,callback:function(t){e.$set(e.creatform,"user_id",t)},expression:"creatform.user_id"}},e._l(e.userList,(function(e,t){return r("el-option",{key:t,attrs:{label:e.name_zh,value:e.id}})})),1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.validForm}},[e._v("确 定")])],1)],1)],1)},n=[],i=(r("5c4c"),r("6a61"),r("2e91")),s=r("5c5d"),o=r("a6f1"),l=r("51d6"),c=r("6e1b"),u=r("c4c8"),d=r("aa4b"),m=r("c24f"),p={name:"MyProJect",components:{WebInterFace:s["default"],Transfer:o["default"],dllStorage:l["default"]},data:function(){return{rules:{name:[{required:!0,message:"请输入工单名称",trigger:"blur"}],hospital_id:[{required:!0,message:"请选择医院名称",trigger:"blur"}],product_id:[{required:!0,message:"请选择产品名称",trigger:"blur"}],user_id:[{required:!0,message:"请选择负责人",trigger:"blur"}]},isDrawerWeb:!1,isDrawerDirect:!1,pageInfo:{pageSize:8,pageNum:1},total:0,ser_form:{hospital:"",product:"",time:"",status:"",stime:"",etime:""},creatform:{name:"",hospital_id:"",product_id:"",user_id:""},rend:!1,transfer:1,visible:!1,id:null,productid:null,hospitalid:null,dialogvisible:!1,directvisible:!1,toggleSearchStatus:!1,tableData:[],productList:[],hospitalList:[],str:"",options:[{value:"0",label:"已完成"},{value:"1",label:"进行中"}],userList:[],pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,r=new Date;r.setTime(r.getTime()-6048e5),e.$emit("pick",[r,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,r=new Date;r.setTime(r.getTime()-2592e6),e.$emit("pick",[r,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,r=new Date;r.setTime(r.getTime()-7776e6),e.$emit("pick",[r,t])}}]}}},watch:{"ser_form.time":function(e){this.ser_form.stime=e[0],this.ser_form.etime=e[1]}},created:function(){this.fetchData(),this.getProduct(),this.getHospitalList(),this.getUsers()},methods:{currentChange:function(e){this.rend=!1,this.transfer=e,this.rend=!0,this.$refs.dllStorage.fetchData()},changeCurrent:function(e,t){},handleClick:function(e){},Toggle:function(){this.toggleSearchStatus=!this.toggleSearchStatus},resetForm:function(e){this.$refs[e].resetFields(),this.fetchData()},addJob:function(){var e=this;this.visible=!0,this.str="",this.$nextTick((function(){e.resetForm("creatform")}))},handleCurrentChange:function(e){this.pageInfo.pageNum=e,this.fetchData()},handleCloseMyjob:function(e){this.$confirm("确认关闭？").then((function(t){e()})).catch((function(e){}))},confirm:function(e,t,r){this.id=e,this.productid=t,this.hospitalid=r,this.isDrawerDirect=!0,this.rend=!0},onCancel:function(e,t,r){this.id=e,this.productid=t,this.hospitalid=r,this.isDrawerWeb=!0},directvisibleValue:function(e){this.directvisible=e},fetchData:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.parse(JSON.stringify(e.ser_form)),delete r["time"],t.next=4,Object(c["findJobByName"])(_.assign(r,e.pageInfo));case 4:a=t.sent,n=a.t,e.tableData=n.list,e.pageInfo.pageNum=n.pageNum,e.total=n.total;case 9:case"end":return t.stop()}}),t)})))()},getProduct:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(u["getName"])();case 2:r=t.sent,a=r.t,e.productList=a.list;case 5:case"end":return t.stop()}}),t)})))()},getHospitalList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(d["getHospital"])();case 2:r=t.sent,a=r.t,e.hospitalList=a.list;case 5:case"end":return t.stop()}}),t)})))()},getUsers:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(m["getuserList"])();case 2:r=t.sent,a=r.t,e.userList=a;case 5:case"end":return t.stop()}}),t)})))()},doEdit:function(e){this.str="edit",this.creatform={name:e.name,hospital_id:e.hospital_id,product_id:e.product_id,user_id:e.user_id,id:e.id},this.visible=!0},doDel:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a,n,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(c["deleteJob"])({id:e.id});case 2:a=r.sent,a.t,n=a.state,i=a.msg,t.$message({type:n,message:i}),t.fetchData();case 8:case"end":return r.stop()}}),r)})))()},validForm:function(){var e=this;this.$refs["creatform"].validate((function(t){if(!t)return!1;e.insertMyjob()}))},insertMyjob:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a,n,i,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("edit"!=e.str){t.next=10;break}return t.next=3,Object(c["updateJob"])(e.creatform);case 3:r=t.sent,r.t,a=r.state,n=r.msg,e.$message({type:a,message:n}),t.next=17;break;case 10:return t.next=12,Object(c["insertJob"])(e.creatform);case 12:i=t.sent,i.t,s=i.state,o=i.msg,e.$message({type:s,message:o});case 17:e.visible=!1,e.fetchData();case 19:case"end":return t.stop()}}),t)})))()}}},f=p,b=(r("8a40"),r("c701")),h=Object(b["a"])(f,a,n,!1,null,"44949662",null);t["default"]=h.exports},"84b1":function(e,t,r){"use strict";r("f8fe")},"896c":function(e,t,r){"use strict";r("2286")},"8a40":function(e,t,r){"use strict";r("8cd1")},"8cd1":function(e,t,r){},a6f1:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"transfer-container"},[r("el-form",{ref:"serForm",attrs:{"label-width":"80px",model:e.serForm}},[r("el-row",[r("el-col",{attrs:{lg:5}},[r("el-form-item",{attrs:{label:"名称",prop:"name"}},[r("el-input",{model:{value:e.serForm.name,callback:function(t){e.$set(e.serForm,"name",t)},expression:"serForm.name"}})],1)],1),r("el-col",{attrs:{lg:5}},[r("el-form-item",{attrs:{label:"类型",prop:"from_type"}},[r("el-select",{model:{value:e.serForm.from_type,callback:function(t){e.$set(e.serForm,"from_type",t)},expression:"serForm.from_type"}},e._l(e.dbTypeList,(function(e,t){return r("el-option",{key:t,attrs:{label:e.remark,value:e.remark}})})),1)],1)],1),r("el-col",{attrs:{lg:6,offset:6}},[r("el-button",{attrs:{type:"primary"},on:{click:e.fetchData}},[e._v("查询")]),r("el-button",{on:{click:e.reset}},[e._v("重置")]),r("el-button",{on:{click:e.addDirect}},[e._v("新增")])],1)],1)],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","highlight-current-row":""},on:{"row-click":e.changeCurrent}},[r("el-table-column",{attrs:{prop:"name",label:"名称",width:"200"}}),r("el-table-column",{attrs:{prop:"from_uri",label:"地址",width:"200"}}),r("el-table-column",{attrs:{prop:"dbname",label:"数据库名",width:"120"}}),r("el-table-column",{attrs:{prop:"from_username",label:"用户名",width:"120"}}),r("el-table-column",{attrs:{prop:"from_pwd",label:"密码",width:"120"}}),r("el-table-column",{attrs:{prop:"from_type",label:"数据库类型",width:"120"}}),r("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.cq(t.row)}}},[e._v("新建抽取")]),r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){return e.doEdit(t.row)}}},[e._v(" 修改 ")]),r("el-popconfirm",{attrs:{title:"确定删除吗？"},on:{onConfirm:function(r){return e.doDel(t.row)}}},[r("el-button",{attrs:{slot:"reference",type:"text",size:"small"},slot:"reference"},[e._v(" 删除 ")])],1)]}}])})],1),r("el-pagination",{attrs:{"current-page":e.page.pageNum,"page-size":e.page.pageSize,layout:"total, prev, pager, next",total:e.page.total},on:{"update:currentPage":function(t){return e.$set(e.page,"pageNum",t)},"update:current-page":function(t){return e.$set(e.page,"pageNum",t)},"current-change":e.handleCurrentChange}}),r("Direct",{attrs:{id:e.jobId,directvisible:e.directvisible,"form-data":e.form,hospitalid:e.hospitalid,productid:e.productid},on:{translate:e.translate,directvisibleValue:e.directvisibleValue}}),r("DllStorageAdd",{ref:"DllStorageAdd",attrs:{dllvisible:e.dllvisible,"transfer-id":e.transferId,hospitalid:e.hospitalid,productid:e.productid,str:e.str,"form-data":e.form,jobid:e.jobId},on:{translate:e.translate,dllvisibleValue:e.dllvisibleValue}})],1)},n=[],i=(r("4798"),r("6a61"),r("2e91")),s=r("77cb"),o=r("d4e5"),l=r("f59e"),c=r("283b"),u=r("cf80"),d={name:"Transfer",components:{Direct:o["default"],DllStorageAdd:s["default"]},props:{hospitalid:{type:Number,default:null},jobId:{type:Number,default:null},productid:{type:Number,default:null}},data:function(){return{page:{pageNum:1,pageSize:6,total:0},tableData:[],directvisible:!1,dllvisible:!1,form:"",transferId:"",dbTypeList:[],serForm:{name:"",from_type:""},directData:{},str:"add"}},watch:{hospitalid:function(e){alert(e)},jobId:function(e){alert(e)},productid:function(e){alert(e)}},created:function(){this.fetchData(),this.getdbTypeList()},methods:{changeCurrent:function(e,t,r){this.$emit("current-change",e.id)},handleCurrentChange:function(e){this.page.pageNum=e,this.fetchData()},addDirect:function(){this.directvisible=!0},resetForm:function(e){this.$refs[e].resetFields(),this.fetchData()},fetchData:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.parse(JSON.stringify(e.page)),delete r["total"],t.next=4,Object(u["transfer"])(_.assign({job_id:e.jobId},r,e.serForm));case 4:a=t.sent,n=a.t,e.tableData=n.list,e.page.pageNum=n.pageNum,e.page.total=n.total,0==n.list.length&&e.$emit("current-change",0);case 10:case"end":return t.stop()}}),t)})))()},doEdit:function(e){this.directvisible=!0,this.form=e},cq:function(e){var t=this;this.$nextTick((function(){t.$refs["DllStorageAdd"].resetForm()})),this.transferId=e.id,this.productid=e.product_id,this.hospitalid=e.hospital_id,this.dllvisible=!0},doDel:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a,n,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(c["delTransfer"])(e);case 2:a=r.sent,a.t,n=a.msg,i=a.state,t.$message({message:n,type:i}),t.fetchData();case 8:case"end":return r.stop()}}),r)})))()},directvisibleValue:function(e){this.directvisible=e},dllvisibleValue:function(e){this.dllvisible=e},translate:function(){this.fetchData()},getdbTypeList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["findByFactor"])({dict_id:5});case 2:r=t.sent,a=r.t,e.dbTypeList=a;case 5:case"end":return t.stop()}}),t)})))()},reset:function(){this.resetForm("serForm"),this.fetchData()}}},m=d,p=r("c701"),f=Object(p["a"])(m,a,n,!1,null,null,null);t["default"]=f.exports},aa4b:function(e,t,r){"use strict";r.r(t),r.d(t,"deleteRow",(function(){return n})),r.d(t,"getHospital",(function(){return i})),r.d(t,"insert",(function(){return s})),r.d(t,"update",(function(){return o}));var a=r("b775");function n(e){return Object(a["default"])({url:"/hospital/delete",method:"delete",data:e})}function i(e){return Object(a["default"])({url:"/hospital/findByName",method:"get",params:e})}function s(e){return Object(a["default"])({url:"/hospital/insert",method:"post",data:e})}function o(e){return Object(a["default"])({url:"/hospital/update",method:"put",data:e})}},b1f5:function(e,t,r){"use strict";r.r(t),r.d(t,"sendout",(function(){return n})),r.d(t,"save",(function(){return i})),r.d(t,"createFile",(function(){return s})),r.d(t,"getAll",(function(){return o})),r.d(t,"test",(function(){return l})),r.d(t,"saveOneTable",(function(){return c})),r.d(t,"doDel",(function(){return u}));var a=r("b775");function n(e){return Object(a["default"])({url:"/api/sendOut",method:"post",data:e})}function i(e){return Object(a["default"])({url:"/api/save",method:"post",data:e})}function s(e){return Object(a["default"])({url:"/api/createFile",method:"post",data:e})}function o(e){return Object(a["default"])({url:"/api/getAll",method:"get",params:e})}function l(e){return Object(a["default"])({url:"/api/analysis",method:"post",data:e})}function c(e){return Object(a["default"])({url:"/api/saveOneTable",method:"post",data:e})}function u(e){return Object(a["default"])({url:"/api/del",method:"get",params:e})}},c4c8:function(e,t,r){"use strict";r.r(t),r.d(t,"getProduct",(function(){return n})),r.d(t,"selectAll",(function(){return i})),r.d(t,"deleteRow",(function(){return s})),r.d(t,"getName",(function(){return o})),r.d(t,"insert",(function(){return l})),r.d(t,"update",(function(){return c}));var a=r("b775");function n(){return Object(a["default"])({url:"/product/findAll",method:"get"})}function i(){return Object(a["default"])({url:"/product/selectAll",method:"get"})}function s(e){return Object(a["default"])({url:"/product/delete",method:"delete",data:e})}function o(e){return Object(a["default"])({url:"/product/findByName",method:"get",params:e})}function l(e){return Object(a["default"])({url:"/product/insert",method:"post",data:e})}function c(e){return Object(a["default"])({url:"/product/update",method:"put",data:e})}},cf80:function(e,t,r){"use strict";r.r(t),r.d(t,"transfer",(function(){return n})),r.d(t,"dcProcedure",(function(){return i})),r.d(t,"findByJobId",(function(){return s}));var a=r("b775");function n(e){return Object(a["default"])({url:"/transfer/findByJobId",method:"GET",params:e})}function i(e){return Object(a["default"])({url:"/dcProcedure/findBytransferId",method:"GET",params:e})}function s(e){return Object(a["default"])({url:"/api/findByJobId",method:"GET",params:e})}},d434:function(e,t,r){"use strict";r.r(t),r.d(t,"testProc",(function(){return n})),r.d(t,"findAllOts",(function(){return i})),r.d(t,"findDcProcedure",(function(){return s})),r.d(t,"saveProc",(function(){return o})),r.d(t,"findAllProc",(function(){return l})),r.d(t,"updateProc",(function(){return c})),r.d(t,"getExtract",(function(){return u})),r.d(t,"extractDate",(function(){return d})),r.d(t,"extractDateWb",(function(){return m}));var a=r("b775");function n(e){return Object(a["default"])({url:"/dcProcedure/testProc",method:"put",data:e})}function i(e){return Object(a["default"])({url:"/dcProcedure/findAllOts",method:"get",params:e})}function s(e){return Object(a["default"])({url:"/dcProcedure/findByName",method:"get",params:e})}function o(e){return Object(a["default"])({url:"/dcProcedure/save",method:"post",data:e})}function l(e){return Object(a["default"])({url:"/dcProcedure/findAll",method:"get",data:e})}function c(e){return Object(a["default"])({url:"/dcProcedure/update",method:"get",data:e})}function u(e){return Object(a["default"])({url:"/dcProcedure/getExtract",method:"post",data:e})}function d(e){return Object(a["default"])({url:"/dcProcedure/extractDate",method:"post",data:e})}function m(e){return Object(a["default"])({url:"/dcProcedure/extractDateWb",method:"post",data:e})}},d4e5:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"direct-container"},[r("el-dialog",{attrs:{title:"直联库",visible:e.directvisible,width:"28%","before-close":e.handleClose,modal:!1},on:{"update:visible":function(t){e.directvisible=t}}},[r("el-form",{ref:"form",attrs:{"label-width":"100px",rules:e.rules,model:e.form}},[r("el-form-item",{attrs:{label:"名称",prop:"name"}},[r("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),r("el-form-item",{attrs:{label:"地址",prop:"from_uri"}},[r("el-input",{model:{value:e.form.from_uri,callback:function(t){e.$set(e.form,"from_uri",t)},expression:"form.from_uri"}})],1),r("el-form-item",{attrs:{label:"数据库名",prop:"dbname"}},[r("el-input",{model:{value:e.form.dbname,callback:function(t){e.$set(e.form,"dbname",t)},expression:"form.dbname"}})],1),r("el-form-item",{attrs:{label:"用户名",prop:"from_username"}},[r("el-input",{model:{value:e.form.from_username,callback:function(t){e.$set(e.form,"from_username",t)},expression:"form.from_username"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"from_pwd"}},[r("el-input",{model:{value:e.form.from_pwd,callback:function(t){e.$set(e.form,"from_pwd",t)},expression:"form.from_pwd"}})],1),r("el-form-item",{attrs:{label:"类型",prop:"from_type"}},[r("el-select",{model:{value:e.form.from_type,callback:function(t){e.$set(e.form,"from_type",t)},expression:"form.from_type"}},e._l(e.dbTypeList,(function(t,a){return r("el-option",{key:a,attrs:{label:t.remark,value:t.remark},nativeOn:{click:function(r){return e.setType(t)}}})})),1)],1),r("el-form-item",{attrs:{label:"访问字符串",prop:"link_str"}},[r("el-input",{model:{value:e.form.link_str,callback:function(t){e.$set(e.form,"link_str",t)},expression:"form.link_str"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.cancel}},[e._v("取 消")]),r("el-button",{on:{click:e.test}},[e._v("测 试")]),r("el-button",{attrs:{type:"primary"},on:{click:e.toSave}},[e._v("保 存")])],1)],1)],1)},n=[],i=(r("4798"),r("6a61"),r("2e91")),s=r("f59e"),o=r("283b"),l={name:"Direct",props:{directvisible:{type:Boolean},id:{type:Number||String,default:null},productid:{type:Number||String,default:null},hospitalid:{type:Number||String,default:null},formData:{type:Object,default:function(){return{name:"",dbname:"",from_uri:"",from_username:"",from_pwd:"",from_type:"",from_type_id:"",hospital_id:this.hospitalid,product_id:this.productid,job_id:this.id,link_str:""}}}},data:function(){return{form:{link_str:"",name:"",dbname:"",from_uri:"",from_username:"",from_pwd:"",from_type:"",from_type_id:"",hospital_id:this.hospitalid,product_id:this.productid,job_id:this.id},dbTypeList:[],rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],dbname:[{required:!0,message:"请输入数据库名",trigger:"blur"}],from_uri:[{required:!0,message:"请输入服务器地址",trigger:"blur"}],from_username:[{required:!0,message:"请输入用户名",trigger:"blur"}],from_pwd:[{required:!0,message:"请输入密码",trigger:"blur"}],from_type_id:[{required:!0,message:"请选择数据库类型",trigger:"blur"}]}}},watch:{formData:function(e,t){this.form=JSON.parse(JSON.stringify(e))},directvisible:function(e,t){e&&(this.form.job_id=this.id,this.form.product_id=this.productid)},hospitalid:function(e){this.form.hospital_id=e}},created:function(){this.gwtDbTypeList()},mounted:function(){},methods:{cancel:function(){this.$emit("directvisibleValue",!1)},handleClose:function(){var e=this;this.$confirm("确认关闭？").then((function(t){e.$emit("directvisibleValue",!1)})).catch((function(e){}))},gwtDbTypeList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["findByFactor"])({dict_id:5});case 2:r=t.sent,a=r.t,r.state,r.msg,e.dbTypeList=a;case 7:case"end":return t.stop()}}),t)})))()},test:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["transferTest"])(e.form);case 2:r=t.sent,r.t,a=r.state,n=r.msg,e.$message({message:n,type:a});case 7:case"end":return t.stop()}}),t)})))()},toSave:function(){var e=this;this.$refs["form"].validate((function(t){if(!t)return e.$message({message:"请输入必填项！",type:"error"}),!1;e.save()}))},setType:function(e){this.form.from_type_id=e.val},save:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a,n,i,s,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.form.id){t.next=10;break}return t.next=3,Object(o["editTransfer"])(e.form);case 3:r=t.sent,r.t,a=r.state,n=r.msg,e.$message({message:n,type:a}),t.next=17;break;case 10:return t.next=12,Object(o["saveTransfer"])(e.form);case 12:i=t.sent,i.t,s=i.state,l=i.msg,e.$message({message:l,type:s});case 17:e.$emit("directvisibleValue",!1),e.$emit("translate");case 19:case"end":return t.stop()}}),t)})))()}}},c=l,u=r("c701"),d=Object(u["a"])(c,a,n,!1,null,null,null);t["default"]=d.exports},dc53:function(e,t,r){"use strict";r.r(t),r.d(t,"getList",(function(){return n})),r.d(t,"doEdit",(function(){return i})),r.d(t,"doSave",(function(){return s})),r.d(t,"doDelete",(function(){return o}));var a=r("b775");function n(e){return Object(a["default"])({url:"/table/findAll",method:"get",params:e})}function i(e){return Object(a["default"])({url:"/schedule/updateScheduleRequestAPI",method:"put",data:e})}function s(e){return Object(a["default"])({url:"/table/save",method:"post",data:e})}function o(e){return Object(a["default"])({url:"/table/del",method:"delete",data:e})}},f59e:function(e,t,r){"use strict";r.r(t),r.d(t,"findByFactor",(function(){return n})),r.d(t,"insertDv",(function(){return i})),r.d(t,"updateDv",(function(){return s}));var a=r("b775");function n(e){return Object(a["default"])({url:"/dv/findByFactor",method:"get",params:e})}function i(e){return Object(a["default"])({url:"/dv/insert",method:"post",data:e})}function s(e){return Object(a["default"])({url:"/dv/update",method:"put",data:e})}},f8fe:function(e,t,r){}}]);