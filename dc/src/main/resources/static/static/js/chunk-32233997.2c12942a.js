/*!
 *  build:  
 *  time: 2022-2-17 10:18:19
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-32233997"],{"5ee3":function(e,t,a){},"8df7":function(e,t,a){"use strict";a("5ee3")},a08a:function(e,t,a){"use strict";a.r(t),a.d(t,"findByKsId",(function(){return s})),a.d(t,"findAllSysStandard",(function(){return n})),a.d(t,"findBySysGroupKsId",(function(){return o})),a.d(t,"findByItdKsId",(function(){return l})),a.d(t,"findBySysYqId",(function(){return i})),a.d(t,"sysKsSave",(function(){return c})),a.d(t,"sysKsUpdate",(function(){return u})),a.d(t,"startOrStop",(function(){return d})),a.d(t,"findAllBySysGroupKs",(function(){return m})),a.d(t,"groupKsSave",(function(){return p}));var r=a("b775");function s(e){return Object(r["default"])({url:"/sysKs/findByKsId",method:"get",params:e})}function n(e){return Object(r["default"])({url:"/sysStandardKs/findAllSysStandard",method:"get",params:e})}function o(e){return Object(r["default"])({url:"/sysGroupKs/findBySysGroupKsId",method:"get",params:e})}function l(e){return Object(r["default"])({url:"/sysItdKs/findByItdKsId",method:"get",params:e})}function i(e){return Object(r["default"])({url:"/sysYq/findBySysYqId",method:"get",params:e})}function c(e){return Object(r["default"])({url:"/sysKs/save",method:"post",data:e})}function u(e){return Object(r["default"])({url:"/sysKs/update",method:"put",data:e})}function d(e){return Object(r["default"])({url:"/sysKs/startOrStop",method:"get",params:e})}function m(e){return Object(r["default"])({url:"/sysGroupKs/findAllBySysGroupKs",method:"get",params:e})}function p(e){return Object(r["default"])({url:"/sysGroupKs/save",method:"post",data:e})}},b923:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ks-container"},[a("div",{staticClass:"header"},[a("vab-query-form",[a("vab-query-form-right-panel",{attrs:{span:24}},[a("el-form",{attrs:{model:e.page,inline:""}},[a("el-form-item",[a("el-input",{staticStyle:{width:"200px"},attrs:{size:"small",placeholder:"名称、代码查询"},model:{value:e.page.name,callback:function(t){e.$set(e.page,"name",t)},expression:"page.name"}})],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.fetchData}},[e._v(" 查询 ")])],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.showKs("")}}},[e._v(" 新增 ")])],1)],1)],1)],1)],1),a("div",{staticClass:"ks_content"},[a("el-table",{ref:"table",attrs:{border:"","column-filter":"",columns:e.tableData,size:"medium",data:e.tableData}},[a("el-table-column",{attrs:{label:"名称",prop:"name",align:"center"}}),a("el-table-column",{attrs:{label:"简称",prop:"short_name",align:"center"}}),a("el-table-column",{attrs:{label:"标准科目名称",prop:"standard_ks_name",align:"center"}}),a("el-table-column",{attrs:{label:"院区名称",prop:"yq_name",align:"center"}}),a("el-table-column",{attrs:{label:"集团科室名称",prop:"ltd_ks_name",align:"center"}}),a("el-table-column",{attrs:{label:"科组名称",prop:"group_ks_name",align:"center"}}),a("el-table-column",{attrs:{label:"床位数",prop:"bed",align:"center"}}),a("el-table-column",{attrs:{label:"编制床位",prop:"auth_bed",align:"center"}}),a("el-table-column",{attrs:{label:"加床数",prop:"extra_bed",align:"center"}}),a("el-table-column",{attrs:{label:"门诊科室",prop:"is_od",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("formatTableData")(t.row.is_od))+" ")]}}])}),a("el-table-column",{attrs:{label:"住院科室",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("formatTableData")(t.row.is_id))+" ")]}}])}),a("el-table-column",{attrs:{label:"急诊科室",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("formatTableData")(t.row.is_ed))+" ")]}}])}),a("el-table-column",{attrs:{label:"手术操作科室",prop:"is_opr",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("formatTableData")(t.row.is_opr))+" ")]}}])}),a("el-table-column",{attrs:{label:"启用/停用",width:"150px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{size:"mini","active-color":"#13ce66","inactive-color":"#ff4949","active-text":"启用","inactive-text":"停用","active-value":1,"inactive-value":0},on:{change:function(a){return e.handleIsShow(t.row)}},model:{value:t.row.is_on,callback:function(a){e.$set(t.row,"is_on",a)},expression:"scope.row.is_on"}})]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{attrs:{type:"primary"},on:{click:function(a){return e.showKs(t.row)}}},[e._v("编辑")])]}}])})],1),a("el-pagination",{attrs:{"current-page":e.page.pageNum,"page-size":e.page.pageSize,layout:"total, prev, pager, next",total:e.total},on:{"update:currentPage":function(t){return e.$set(e.page,"pageNum",t)},"update:current-page":function(t){return e.$set(e.page,"pageNum",t)},"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{visible:e.visible,target:"body",modal:"",title:e.sta?"新增科室":"修改科室",width:"750px",resizable:"","before-close":e.handleClose},on:{"update:visible":function(t){e.visible=t}}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("div",{staticStyle:{"overflow-y":"scroll",height:"100%"}},[a("el-input",{attrs:{placeholder:"输入关键字进行过滤",size:"small",clearable:""},on:{clear:function(t){e.standardKs=JSON.parse(JSON.stringify(e.standardKs2))}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.filterNode(t)}},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),a("el-tree",{ref:"tree",staticClass:"elTree",attrs:{data:e.standardKs,props:e.defaultProps,"default-expand-all":"","node-key":"id","highlight-current":""},on:{"node-click":e.selectTree}})],1)]),a("el-col",{attrs:{span:16}},[a("el-form",{attrs:{model:e.ksForm,"label-width":"90px",size:"small"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"代码",prop:"code"}},[a("el-input",{model:{value:e.ksForm.code,callback:function(t){e.$set(e.ksForm,"code",t)},expression:"ksForm.code"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{model:{value:e.ksForm.name,callback:function(t){e.$set(e.ksForm,"name",t)},expression:"ksForm.name"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"简称",prop:"short_name"}},[a("el-input",{model:{value:e.ksForm.short_name,callback:function(t){e.$set(e.ksForm,"short_name",t)},expression:"ksForm.short_name"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"科目",prop:"standard_ks_name"}},[a("el-input",{attrs:{disabled:""},model:{value:e.ksForm.standard_ks_name,callback:function(t){e.$set(e.ksForm,"standard_ks_name",t)},expression:"ksForm.standard_ks_name"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"院区",prop:"yq_id"}},[a("el-select",{model:{value:e.ksForm.yq_id,callback:function(t){e.$set(e.ksForm,"yq_id",t)},expression:"ksForm.yq_id"}},e._l(e.yq,(function(t,r){return a("el-option",{key:r,attrs:{value:t.id,label:t.name},nativeOn:{click:function(a){return e.setyqId(t)}}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"床位数",prop:"bed"}},[a("el-input",{model:{value:e.ksForm.bed,callback:function(t){e.$set(e.ksForm,"bed",t)},expression:"ksForm.bed"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"加床数",prop:"extra_bed"}},[a("el-input",{model:{value:e.ksForm.extra_bed,callback:function(t){e.$set(e.ksForm,"extra_bed",t)},expression:"ksForm.extra_bed"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"编制床位数",prop:"auth_bed"}},[a("el-input",{model:{value:e.ksForm.auth_bed,callback:function(t){e.$set(e.ksForm,"auth_bed",t)},expression:"ksForm.auth_bed"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"科组",prop:"group_ks_id"}},[a("el-select",{attrs:{filterable:""},model:{value:e.ksForm.group_ks_id,callback:function(t){e.$set(e.ksForm,"group_ks_id",t)},expression:"ksForm.group_ks_id"}},e._l(e.groupKs,(function(t,r){return a("el-option",{key:r,attrs:{value:t.code,label:t.name},nativeOn:{click:function(a){return e.setstandardKsId(t)}}})})),1),a("el-link",{staticStyle:{"margin-left":"10px"},attrs:{underline:!1},on:{click:e.handelAddGroup}},[a("i",{staticClass:"el-icon-circle-plus"})])],1)],1),a("el-col",{attrs:{span:24}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"住院"}},[a("el-radio",{attrs:{label:1},model:{value:e.ksForm.is_id,callback:function(t){e.$set(e.ksForm,"is_id",t)},expression:"ksForm.is_id"}},[e._v("是")]),a("el-radio",{attrs:{label:0},model:{value:e.ksForm.is_id,callback:function(t){e.$set(e.ksForm,"is_id",t)},expression:"ksForm.is_id"}},[e._v("否")])],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"门诊"}},[a("el-radio",{attrs:{label:1},model:{value:e.ksForm.is_od,callback:function(t){e.$set(e.ksForm,"is_od",t)},expression:"ksForm.is_od"}},[e._v("是")]),a("el-radio",{attrs:{label:0},model:{value:e.ksForm.is_od,callback:function(t){e.$set(e.ksForm,"is_od",t)},expression:"ksForm.is_od"}},[e._v("否")])],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"急诊"}},[a("el-radio",{attrs:{label:1},model:{value:e.ksForm.is_ed,callback:function(t){e.$set(e.ksForm,"is_ed",t)},expression:"ksForm.is_ed"}},[e._v("是")]),a("el-radio",{attrs:{label:0},model:{value:e.ksForm.is_ed,callback:function(t){e.$set(e.ksForm,"is_ed",t)},expression:"ksForm.is_ed"}},[e._v("否")])],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"手术"}},[a("el-radio",{attrs:{label:1},model:{value:e.ksForm.is_opr,callback:function(t){e.$set(e.ksForm,"is_opr",t)},expression:"ksForm.is_opr"}},[e._v("是")]),a("el-radio",{attrs:{label:0},model:{value:e.ksForm.is_opr,callback:function(t){e.$set(e.ksForm,"is_opr",t)},expression:"ksForm.is_opr"}},[e._v("否")])],1)],1)],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.visible=!1}}},[e._v("取消")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.save}},[e._v("保存")])],1)],1),a("el-dialog",{attrs:{title:"新增科组",visible:e.dialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"科室名",prop:"name"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"科室代码",prop:"code"}},[a("el-input",{model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handelSave}},[e._v("确 定")])],1)],1)],1)},s=[],n=(a("422c"),a("69bf"),a("5c4c"),a("845c"),a("72fb"),a("1f90"),a("d211")),o=a("4c09"),l=(a("6a61"),a("2e91")),i=a("a08a"),c={name:"Ks",filters:{formatTableData:function(e){var t="";return t=1===e?"是":"否",t}},data:function(){return{dialogVisible:!1,columns:[],query:{},selection:[],page:{pageSize:8,pageNum:1,name:""},total:0,tableData:[],standardKs:[],standardKs2:[],group:[],it:[],yq:[],groupKs:[],visible:!1,filterText:"",defaultProps:{children:"children",label:"name"},ksForm:{auth_bed:"",bed:"",extra_bed:"",group_ks_id:"",group_ks_name:"",code:"",is_ed:"",is_id:"",is_od:"",is_opr:"",ltd_ks_id:"",ltd_ks_name:"",name:"",short_name:"",standard_ks_id:"",standard_ks_name:"",yq_id:"",yq_name:""},sta:!0,form:{code:"",end_time:null,is_on:1,name:"",parent_code:"",parent_name:"",start_time:null},rules:{name:[{required:!0,message:"请输入科室名",trigger:"blur"}],code:[{required:!0,message:"请输入科室代码",trigger:"blur"}]}}},computed:{},created:function(){this.fetchData(),this.getStandardKs(),this.getGroup(),this.getYq()},methods:{handelAddGroup:function(){this.dialogVisible=!0},handelSave:function(){var e=this;this.$refs.form.validate(function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=12;break}return t.next=3,Object(i["groupKsSave"])(e.form);case 3:r=t.sent,r.msg,r.state,e.dialogVisible=!1,e.getStandardKs(),e.ksForm.group_ks_id=e.form.code,e.form=e.$options.data().form,t.next=13;break;case 12:return t.abrupt("return",!1);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},handleClose:function(e){this.$confirm("确认关闭？").then((function(t){e()})).catch((function(e){}))},filterNode:function(){var e=this.filterText;""==e&&(this.standardKs=JSON.parse(JSON.stringify(this.standardKs2)));var t=[],a=JSON.parse(JSON.stringify(this.standardKs2)),r=e?this.rebuildData(e,a):JSON.parse(JSON.stringify(a));t.push.apply(t,Object(o["a"])(r)),this.standardKs=t},rebuildData:function(e,t){var a=this;if(!t)return[];var r=[];return"[object Array]"===Object.prototype.toString.call(t)&&t.forEach((function(t){if(t.name.indexOf(e)>-1){var s=a.rebuildData(e,t.children),o=Object(n["a"])(Object(n["a"])({},t),{},{children:s});r.push(o)}else if(t.children&&t.children.length>0){var l=a.rebuildData(e,t.children),i=Object(n["a"])(Object(n["a"])({},t),{},{children:l});l&&l.length>0&&r.push(i)}})),r},fetchData:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["findByKsId"])(e.page);case 2:a=t.sent,r=a.t,e.tableData=r.list,e.page.pageNum=r.pageNum,e.total=r.total;case 7:case"end":return t.stop()}}),t)})))()},reset:function(){this.page=this.$options.data().page,this.fetchData()},handleCurrentChange:function(e){this.page.pageNum=e,this.fetchData()},getStandardKs:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["findAllSysStandard"])();case 2:a=t.sent,r=a.t,e.standardKs=r,e.standardKs2=r;case 6:case"end":return t.stop()}}),t)})))()},getGroup:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(i["findAllBySysGroupKs"])();case 2:a=e.sent,r=a.t,t.groupKs=r;case 5:case"end":return e.stop()}}),e)})))()},getIt:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["findByItdKsId"])();case 2:a=t.sent,r=a.t,e.it=r;case 5:case"end":return t.stop()}}),t)})))()},getYq:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["findBySysYqId"])();case 2:a=t.sent,r=a.t,e.yq=r;case 5:case"end":return t.stop()}}),t)})))()},selectTree:function(e){this.ksForm.standard_ks_id=e.id,this.ksForm.standard_ks_name=e.name},setstandardKsId:function(e){this.ksForm.group_ks_name=e.name},setyqId:function(e){this.ksForm.yq_name=e.name},setitId:function(e){this.ksForm.ltd_ks_name=e.name},save:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,r,s,n,o,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.sta){t.next=11;break}return t.next=3,Object(i["sysKsSave"])(e.ksForm);case 3:a=t.sent,r=a.state,s=a.msg,e.$message({type:r,message:s}),e.visible=!1,e.fetchData(),t.next=19;break;case 11:return t.next=13,Object(i["sysKsUpdate"])(e.ksForm);case 13:n=t.sent,o=n.state,l=n.msg,e.$message({type:o,message:l}),e.visible=!1,e.fetchData();case 19:case"end":return t.stop()}}),t)})))()},showKs:function(e){this.visible=!0,this.ksForm=this.$options.data().ksForm,e?(this.ksForm=e,this.sta=!1):this.sta=!0},handleIsShow:function(e){var t=this;this.$confirm("确定"+(e.is_on?"停用":"启用")+"该科室?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(l["a"])(regeneratorRuntime.mark((function a(){var r,s,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(i["startOrStop"])({ksId:e.id});case 2:r=a.sent,s=r.state,n=r.msg,t.$message({type:s,message:n}),t.fetchData(),"error"==s&&(e.is_on=e.is_on?0:1);case 8:case"end":return a.stop()}}),a)})))).catch((function(){e.is_on=e.is_on?0:1}))}}},u=c,d=(a("8df7"),a("c701")),m=Object(d["a"])(u,r,s,!1,null,"49eb6f86",null);t["default"]=m.exports}}]);